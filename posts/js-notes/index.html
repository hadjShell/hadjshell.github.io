<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>JavaScript Notes | Hadjshell</title>
<meta name=keywords content="ÂàÄÊ≥ï(How to play with swordüó°Ô∏è),JavaScript"><meta name=description content="Introduction Three pillars in web development
HTML - Content - Nouns CSS - Style and layout - Adjectives JavaScript - The real programming language to build web applications - Verbs What applications that JavaScript can build?
Front-end apps React, Angular, Vue, etc. Back-end apps Node.js Native mobile apps React Native, Ionic Native desktop apps Electron JavaScript is a multi-paradigm interpreted language
Modern JavaScript uses just-in-time compilation (no portable files) JavaScript runtime"><meta name=author content="Jiayuan Zhang"><link rel=canonical href=https://hadjshell.github.io/posts/js-notes/><link crossorigin=anonymous href=/assets/css/stylesheet.css rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.js onload=hljs.initHighlightingOnLoad()></script><link rel=icon href=https://hadjshell.github.io/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=16x16 href=https://hadjshell.github.io/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=32x32 href=https://hadjshell.github.io/%3Clink%20/%20abs%20url%3E><link rel=apple-touch-icon href=https://hadjshell.github.io/%3Clink%20/%20abs%20url%3E><link rel=mask-icon href=https://hadjshell.github.io/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-123-45","auto"),ga("send","pageview"))</script><meta property="og:title" content="JavaScript Notes"><meta property="og:description" content="Introduction Three pillars in web development
HTML - Content - Nouns CSS - Style and layout - Adjectives JavaScript - The real programming language to build web applications - Verbs What applications that JavaScript can build?
Front-end apps React, Angular, Vue, etc. Back-end apps Node.js Native mobile apps React Native, Ionic Native desktop apps Electron JavaScript is a multi-paradigm interpreted language
Modern JavaScript uses just-in-time compilation (no portable files) JavaScript runtime"><meta property="og:type" content="article"><meta property="og:url" content="https://hadjshell.github.io/posts/js-notes/"><meta property="og:image" content="https://hadjshell.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-02-27T00:00:00+00:00"><meta property="article:modified_time" content="2023-02-27T00:00:00+00:00"><meta property="og:site_name" content="Hadjshell Blog Site"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://hadjshell.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="JavaScript Notes"><meta name=twitter:description content="Introduction Three pillars in web development
HTML - Content - Nouns CSS - Style and layout - Adjectives JavaScript - The real programming language to build web applications - Verbs What applications that JavaScript can build?
Front-end apps React, Angular, Vue, etc. Back-end apps Node.js Native mobile apps React Native, Ionic Native desktop apps Electron JavaScript is a multi-paradigm interpreted language
Modern JavaScript uses just-in-time compilation (no portable files) JavaScript runtime"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://hadjshell.github.io/posts/"},{"@type":"ListItem","position":2,"name":"JavaScript Notes","item":"https://hadjshell.github.io/posts/js-notes/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"JavaScript Notes","name":"JavaScript Notes","description":"Introduction Three pillars in web development\nHTML - Content - Nouns CSS - Style and layout - Adjectives JavaScript - The real programming language to build web applications - Verbs What applications that JavaScript can build?\nFront-end apps React, Angular, Vue, etc. Back-end apps Node.js Native mobile apps React Native, Ionic Native desktop apps Electron JavaScript is a multi-paradigm interpreted language\nModern JavaScript uses just-in-time compilation (no portable files) JavaScript runtime","keywords":["ÂàÄÊ≥ï(How to play with swordüó°Ô∏è)","JavaScript"],"articleBody":" Introduction Three pillars in web development\nHTML - Content - Nouns CSS - Style and layout - Adjectives JavaScript - The real programming language to build web applications - Verbs What applications that JavaScript can build?\nFront-end apps React, Angular, Vue, etc. Back-end apps Node.js Native mobile apps React Native, Ionic Native desktop apps Electron JavaScript is a multi-paradigm interpreted language\nModern JavaScript uses just-in-time compilation (no portable files) JavaScript runtime\nContainer including all the things that we need to use JavaScript\nDifferent types of JavaScript runtime\nRuntime in browsers\nJavaScript engine Program that executes JavaScript code Example: V8 engine for chrome and node.js Web APIs Callback queue Runtime in node.js\nJavaScript engine C++ bindings and thread pool Callback queue JavaScript versions\nES6 / ES2015: biggest update to this language New updates to JS every single year Modern JavaScript - after ES6 Don‚Äôt break the web Backwards compatible Old features are never removed How to use modern JavaScript today? ES5 Fully supported in all browsers Ready to be used today ES6+ Well supported in all modern browsers No support in older browsers Can use most features in production with transpiling and polyfilling How to link JavaScript file to the HTML file?\nIncline script Put JavaScript code in the Strict mode\nPut 'use strict'; statement in the beginning of the .js file Forbid to do certain things Create visible errors Script Loading\nAsync in head\nScripts not guaranteed to execute in order Use for 3rd-party scripts where order doesn‚Äôt matter Defer in head\nScripts are executed in order Overall best solution Variables and Values $ is allowed in the variable‚Äôs name\nDeclaration\nlet Variables Block-scope const Constant Must be assigned with a value Block-scope var Should be avoided Old way of declaring variables before ES6 Function-scope Creates property on window object Hoisting\nMakes some types of variables accessible/usable in the code before they are actually declared\nHoisted Initial Value function declarations Yes Actual function var variables Yes undefined let and const variables No , TDZ (Temperory Dead Zone) function expressions and arrows Depends on using var or let const Data types JavaScript has dynamic typing: we don‚Äôt have to manually define the data type of the value stored in a variable. Instead, data types are determined automatically.\nIn JavaScript, it is the value that has a type, not the variable\nPrimitive data types\nNumber\nFloating point numbers NaN: number value which means invalid number String\nDouble quote or single quote\nTemplate literals\nSyntax\nconst str = `text ${varName1} text ${expression}`; Can also be used to create multiple line strings\n// Instead of doing this way const str = \"text \\n\\ text \\n\\ text\"; // Using template literals const str = `text text text`; Boolean\ntrue or false Falsy values Values are not exactly false but will become false when we try to convert them into a boolean 0, \"\", undefined, null, NaN Truthy values Other values Undefined\nEmpty variable Null\nSymbol\nValue that is unique and cannot be changed BigInt\nLarge integers than the Number type cannot hold Reference data type\nObject Array Function Etc. typeof operator\ntypeof var or typeof value Return a string Type conversion and coercion\nCasting syntax\nconst num = Number(\"text\"); const str = String(10); const bool = Boolean(0); Coercion\n+: Number converts to String implicitly -, *, /: String converts to Number implicitly Using logical operators or condition statement, value will be converted to boolean implicitly Operators Mathematical operators Exponentiation operator: ** +, += can be used for string Assignment operators Abbreviating operators ++, -- Relational operators ===, !== Strict equality operator Doesn‚Äôt perform type coercion ==, != Loose equality operator Does perform type coercion Avoid using loose equality operator Logical operators Use ANY data type, return ANY data type, short-circuiting OR return the first truthy value or the last falsy value if all flasy AND return the first falsy value or the last truthy value if all truthy Bitwise operators Ternary operator Operator precedence Modern operators Spread operator ... ... works on iterables not objects After ES2018, ... works on objects too Nullish coalescing operator ?? Introduced in ES2020 Returns its right-hand side operand when its left-hand side operand is null or undefined, and otherwise returns its left-hand side operand Work with nullish value: null and undeifined without 0 Logical assignment operator Introduced in ES2021 ||=, ??=, \u0026\u0026= Optional chaining ?. Introduced in ES2020 Check if a property or function is undefined or not Usually used with ?? Expressions and Statements Flow control if-else\nThis is allowed in JavaScript:\nconst y = 2; if (y === 3) console.log(x); const x = 1; console.log(x); switch\nfor\nfor-of\nconst arr = [1, 2, 3]; for (const item of arr) console.log(item); const obj = { name: \"John\", gender: \"male\", }; for (const [key, value] of Object.entries(obj)) console.log(key, value); const m = new Map(); for (const [key, value] of m) { } continue and break is allowed while\ndo while\nFunctions Functions in JavaScript are first-class objects, which means they are treated as variables, so in JavaScript we can\nStore functions in variables or properties Pass functions as arguments to other functions Return functions from functions Call methods on functions Higher-order functions\nA function that receives another function as an argument, that returns a new function, or both\nThe function as an argument is called callback function\nfuncArg.name returns the name of the function The function that is returned is called returned function\nSyntax - function declaration\nfunction funcName() {} // example function calcAge1(birthYear) { return 2023 - birthYear; } Functions can be invoked before their declarations\nAnonymous function - function expression\nconst funcName = function () {}; // example const calcAge2 = function (birthYear) { return 2023 - birthYear; }; Cannot be invoked before function expression Arrow function - function expression\nA special form of anonymous function const funcName = para =\u003e exp; // without {}, we don't need to return the value explicitly const funcName = (para1, para2) =\u003e {}; // with {}, we define the function in the traditional way // example const calcAge3 = birthYear =\u003e 2023 - birthYear; Helpful for one-line functions Does not get its own this keyword Default parameters\nUse default parameters whenever is possible function createBooking( flightNum, numPassengers = 1, price = 199 * numPassengers ) {} createBooking(\"LH123\"); createBooking(\"LH123\", 2, 800); createBooking(\"LH123\", undefined, 1000); // skip a parameter to use its default value Immediately invoked function expression\nCalled once and never be called again\n(function () {})(); (() =\u003e {})(); Functions in JavaScript is passed-by-value\narguments\nAn Array-like object accessible inside function that contains the values of the arguments passed to that function this\nDepends on how the function is called, which means it is dynamic\nAlone, this refers to the global object (Window in web browser)\nIn method, this refers to the object\nIn regular function, this refers to undefined (in strict mode; otherwise refers to window)\nWhen a function is used as a callback function, this is lost\nIn arrow function, do NOT get its own this\nIn an event handler function (not defined as arrow function), this always refers to the element on which that handler is attached to\nManually tell how it should behave\nfunc.call(thisArg, args)\nCalls the function with a given this value and arguments provided individually func.apply(thisArg, argsArr)\nCalls the specified function with a given this value, and arguments provided as an array Equals to func.call(thisArg, ...argsArr) Stick to call func.bind(thisArg, )\nCreates a new function that, when called, has its this keyword set to the provided value, with a given sequence of arguments preceding any provided when the new function is called If pass args, it will be preset when the func is called ‚Äî Partial application Pass null to thisArg if you want to create a partial application without having this inside Closures\nA function always has access to the variable environment of the execution context (call stack) in which it was created, even if that execution context is removed from the stack Closure has high priority over scope chain Chaining methods\nAvoid chaining the methods that mutate the original object Functional programming\nDeclarative paradigm Based on the idea of writing software by combining many pure functions, avoiding side effects and mutating data Pure functions are stateless Built-in Data structure Arrays Syntax\nLiteral syntax const array = [element1, element2]; Object const array = new Array(element1, element2); const array2 = new Array(len); // Empty array with length len Can put values of different data types in one array\nArray is also an object\nBasic operations\narray.length\nReturn the length of the array push\nAdd new element to the end of the array Return the length of the new array unshift\nAdd new element to the start of the array Return the length of the new array pop\nRemove the last element of the array Return the removed element shift\nRemoved the first element of the array Return the removed element indexOf\nReturn the index of the element includes\nCheck whether the element is included in the array Destructing array\nconst arr = [1, 2, 3]; const [x, y, z] = arr; // skip elements const [x, , z] = arr; // default value const [a = 0, b = 0, c = 0, d = 0] = arr; // without default value, d will be undefined // switch using this technique [a, b] = [b, a]; Spread array (unpack)\nconst arr = [7, 8, 9]; const newArr = [1, 2, ...arr]; // [1, 2, 7, 8, 9] Rest pattern (pack)\nThe rest element must be the last element const arr = [1, 2, 3, 4, 5]; const [a, b, ...others] = arr; // a = 1, b = 2, others = [3, 4, 5] Using spread and rest together can write more general functions\nfunction add (...numbers) { let sum = 0; for(int i = 0; i \u003c numbers.length; i++) sum += numbers[i]; return sum; } // All of following usages are available add(2, 3); add(1, 2, 3, 4, 5); const x = [1, 2, 3]; add(...x); entries\nReturn a new Array Iterator object that contains the key/value pairs for each index in the array slice(start, end)\nReturns a shallow copy of a portion of an array into a new array object selected from start to end (end not included) where start and end represent the index of items in that array start, end can be negative Create a shallow copy of array: arr.slice() splice(start, deleteCount)\nWorks similar as slice, but change the original array by taking the extracted elements Useful for deleting elements reverse\nChange the original array arr1.concat(arr2)\nReturns a new array, doesn‚Äôt change the original arrays\nSame effect:\n[...arr1, ...arr2]; join(separator)\nReturns a new string by concatenating all of the elements in an array, separated by commas or a specified separator string at\nTakes an integer value and returns the item at that index Useful for accessing the last element arr.at(-1) forEach(callbackFn)\nforEach(function(element, index, array) {})\nforEach((e, i, arr) =\u003e {})\nExecutes a provided function once for each array element element: the current element being processed in the array index: the index of the current element being processed in the array array: the array that calls forEach Throw-away parameter: use _ to name it map(callbackFn)\nCreates a new array populated with the results of calling a provided function on every element in the calling array filter(callbackFn)\nReturns a shallow copy of a portion of the given array, filtered down to just the elements from the given array that pass the test implemented by the provided function. If no elements pass the test, an empty array will be returned callbackFn returns a boolean value reduce(callbackFn, initialValue)\nreduce(function(accumulator, currentValue, currentIndex, array) {}, initiaValue)\nExecutes a user-supplied ‚Äúreducer‚Äù callback function on each element of the array, in order, passing in the return value from the calculation on the preceding element. The final result of running the reducer across all elements of the array is a single value accumulator: the value resulting from the previous call to callbackFn initialValue: a value to which accumulator is initialized the first time the callback is called. If initialValue is specified, callbackFn starts executing with the first value in the array as currentValue. If initialValue is not specified, accumulator is initialized to the first value in the array, and callbackFn starts executing with the second value in the array as currentValue. In this case, if the array is empty (so that there‚Äôs no first value to return as accumulator), an error is thrown find(callbackFn)\nfindLast(callbackFn)\nReturns the first / last element in the provided array that satisfies the provided testing function. If no values satisfy the testing function, undefined is returned callbackFn returns a boolean value findIndex(callbackFn)\nfindLastIndex(callbackFn)\nReturns the index of the first / last element in an array that satisfies the provided testing function. If no elements satisfy the testing function, -1 is returned some(callbackFn)\nTests whether at least one element in the array passes the test implemented by the provided function Returns a boolean value It doesn‚Äôt modify the array every(callbackFn)\nTests whether all elements in the array pass the test implemented by the provided function flat(depth)\nCreates a new array with all sub-array elements concatenated into it recursively up to the specified depth depth: The depth level specifying how deep a nested array structure should be flattened. Defaults to 1 flatMap(callbackFm)\nReturns a new array formed by applying a given callback function to each element of the array, and then flattening the result by one level\nIdentical to a map()followed by a flat() of depth 1 (arr.map(callbackFn).flat()), but slightly more efficient than calling those two methods separately\nA use-case\nsort(compareFn)\nsort((a, b) =\u003e {})\nSorts the elements of an array in place and returns the reference to the same array, now sorted\nThe default sort order is ascending, built upon converting the elements into strings, then comparing their sequences of UTF-16 code units values\ncompareFn(a, b) return value sort order \u003e 0 sort a after b \u003c 0 sort a before b === 0 keep original order of a and b Comparing numbers\n// ascending order function compareNumbers(a, b) { return a - b; } // descending order function compareNumbers(a, b) { return b - a; } fill(value)\nfill(value, start, end)\nChanges all elements in an array to a static value, from a start index (default 0) to an end index (default array.length) Returns the modified array Array.from(arrayLike)\nArray.from(arrayLike, mapFn)\nCreates a new, shallow-copied Array instance from an iterable or array-like object\nArray.from() lets you create Array from:\nIterable objects (objects such as Map and Set); or, if the object is not iterable\nArray-like objects (objects with a length property and indexed elements)\nconst arr = Array.from({ length: 7 }, () =\u003e 1); Objects Syntax\nLiteral syntax const obj = { key1: value1, key2: value2, func: function () {}, // Methods }; key are always strings\nIt‚Äôs not a block scope\nEnhanced object literals\nconst openingHours = { fri: { open: 11, close: 23, }, }; const arr = [\"name\", \"gender\"]; const restaurant = { // First enhancement: if the property name is the same as the variable name openingHours, // Second enhancement: function in object check() {}, // Third enhancement: computing property name [arr[0]]: \"John\", }; In object methods, we can use this keyword\nUnlike Java, this must be used explicitly if you need to use the reference of the object Basic operations\nAccess a value\nobj.key obj[\"key\"] The string can be an expression which holds the value of the string of the key name Return undefined if there is not such a key Create a new property on the current object\nobj.newKey = val; obj[\"newKey\"] = val; Object.keys(obj)\nReturn an array of object property names Object.values(obj)\nReturn an array of object property values Object.entries(obj)\nReturn an array of object property key-value pairs Object.freeze(obj)\nMake the object immutable However, it‚Äôs a shallow freeze Destructing objects\nconst restaurant = { name: \"YO\", menu: [\"Ice cream\", \"burger\"], openingHours: { fri: { open: 11, close: 23, }, sat: { open: 0, close: 24, }, sun: { open: 0, close: 24, }, }, }; const { name, openingHours, menu } = restaurant; // order doesn't matter here const { name: x, openingHours: y, menu: z } = restaurant; // new variable name const { menu = [] } = retaurant; // default value const { fri: { open, close }, } = openingHours; //\tnested objetcs // switch ({ a, b } = { b, a }); // () is required Spread\nconst newRestaurant = { ...restaurant, founder: \"John\", }; Rest\nconst { fri, ...otherDays } = openHours; Sets Syntax\nconst s = new Set([]); Basic operations\n.size\nhas\nCheck if the set contains the element add\nAdd an element to a set if it is not included delete\nDelete an element clear\nDelete all elements Convert set to array\nconst arr = [...s]; forEach(function(value, key, set) {})\nkey and value are the same Maps Syntax\nconst m = new Map([ [k1, v1], [k2, v2], ]); Difference from objects: key in a map can be any data type\nBasic operations\n.size\nReturn the size of the map set(key, value)\nAdd a new element into map Return the changed map Can be chained m.set(a, b).set(c, d) get(key)\nReturn the value according to the key Return undefined if there is not such a key has()\nCheck if a map has a certain key delete(key)\nDelete an element according to the key keys()\nReturn an iterable of keys in map [...m.keys()] to get the array of keys values()\nReturn an iterable of values in map entries()\nConvert object to map\nconst m = new Map(Object.entries(obj)); Convert map to array\nconst arr = [...m]; forEach(function(value, key, map) {})\nStrings Whenever call a method on a string, JavaScript will automatically create a string object (boxing)\nOperations\n[]\nAccess the character (still a string) indexOf\nReturn the index of the first appearing string lastIndexOf\nReturn the index of the last appearing string slice()\nReturn the substring\nconst airline = \"TAP Air Portugal\"; airline.slice(4); // airline.slice(4, 7); // airline.slice(0, airline.indexOf(\" \")); // airline.slice(airline.lastIndexOf(\" \") + 1); // airline.slice(-2); // airline.slice(1, -1); // toLowerCase\ntoUpperCase\ntrim\nRemoves whitespace from both ends of a string and returns a new string replace(pattern, replacement)\nReturns a new string with one, some, or all matches of a pattern replaced by a replacement The pattern can be a string or a RegExp, and the replacement can be a string or a function called for each match If pattern is a string, only the first occurrence will be replaced replaceAll\nincludes\nstartsWith\nendsWith\nsplit(pattern)\nTakes a pattern and divides a string into an ordered list of substrings by searching for the pattern, puts these substrings into an array, and returns the array padStart(targetLength, padString)\nPads the current string with another string (multiple times, if needed) until the resulting string reaches the given length The padding is applied from the start of the current string padEnd\nrepeat(count)\nReturns a new string which contains the specified number of copies of the string on which it was called, concatenated together Copy Reference copy\nconst newObj = oldObj; Shallow copy\nconst newArr = [...oldArr]; const newObj = { ...oldObj }; const newObj = Object.assign({}, oldObj); newArr = oldArr.slice(); Deep clone\nUse external libraries like Lodash DOM and Events DOM Document Object Model\nStructured representation of HTML documents\nAllows JavaScript to access HTML elements and styles to manipulate them\nDOM is automatically created by the browser as soon as the HTML page loads\nA tree structure\nDOM is a Web API that written in JavaScript\nDOM objects are unique\n*Every single node in the DOM tree is the type Node*\nRepresented by JavaScript object\ntextContent, childNodes, parentNode, cloneNode(), etc\nNode child classes\nElement\nHTMLElemnt HTMLButtonElement ‚Ä¶ HTMLDivElement Text\nComment\nDocument\nThe special object that is the entry node of the DOM Node inherits EventTarget which has two methods\naddEventListener() removeEventListener() DOM traversal\nElement.children\nReturns a live HTMLCollection which contains all of the child elements of the element upon which it was called Includes only element nodes Element.childNodes\nReturns a live NodeList of child nodes of the given element where the first child node is assigned index 0 Element.parentNode\nElement.parentElement\nDirect parent Element.closest(selector)\nTraverses the element and its parents (heading toward the document root) until it finds a node that matches the specified selector Element.previousElementSibling\nElement.nextElementSibling\nElement.previousSibling\nElement.nextSibling\nOperations Select elements\ndocument\nThe Document object represents your web page document.documentElement\nReturns the Element that is a direct child of the document. For HTML documents, this is normally the HTMLHtmlElement object representing the document‚Äôs element document.head\ndocument.body\ndocument.querySelector(selector)\nReturns the first Element within the document that matches the specified selector selector A string containing one or more selectors to match. This string must be a valid CSS selector string document.querySelectorAll(selector)\nReturns a NodeList of Elements document.getElementByID(id)\ndocument.getElementsByTagName(name)\nReturns an HTMLCollection of elements with the given tag name The returned HTMLCollection is live, meaning that it updates itself automatically to stay in sync with the DOM tree without having to call document.getElementsByTagName() again document.getElementsByClassName(className)\nReturns an HTMLCollection of elements with the given class name Element.querySelector()\nElement.getElementsByTagName(name)\nCreate and insert elements\nElement.insertAdjacentHTML(position, text)\nParses the specified text as HTML or XML and inserts the resulting nodes into the DOM tree at a specified position\nposition\nA string representing the position relative to the element. Must be one of the following strings:\n// // // // foo // // // document.createElement(tagName)\nReturns a new created Element specified by tagName document.createRange().createContextualFragment(markup)\nNode.cloneNode(deep)\nReturn a new cloned Node. The cloned node has no parent and is not part of the document, until it is added to another node that is part of the document\ndeep\nIf true, then the node and its whole subtree, including text that may be in child Text nodes, is also copied If false, only the node will be cloned. The subtree, including any text that the node contains, is not cloned Element.prepend(para1, paraN)\nInserts a set of Nodeobjects or string objects before the first child of the Element String objects are inserted as equivalent Text nodes Element.append(para1, paraN)\nInserts a set of Nodeobjects or string objects after the first child of the Element Element.before(para1, paraN)\nInserts a set of Nodeobjects or string objects in the children list of this Element‚Äôs parent, just before this Element Element.after(para1, paraN)\nInserts a set of Nodeobjects or string objects in the children list of this Element‚Äôs parent, just after this Element Delete elements\nElement.remove() Removes the element from the DOM Manipulate elements\nElement.${attribute}\nNode.textContent\nRepresents the text content of the node and its descendants Setting textContent on a node removes all of the node‚Äôs children and replaces them with a single text node with the given string value Element.innerHTML\nGets or sets the HTML or XML markup contained within the element HTMLInputElement.value\nReturns a String HTMLElement.focus()\nSets focus on the specified element, if it can be focused. The focused element is the element that will receive keyboard and similar events by default HTMLElement.blur()\nRemoves keyboard focus from the current element HTMLElement.style.${property} = \"\"\nReturns the inline style of an element in the form of a CSSStyleDeclaration object Will not change the CSS file; add an inline style attribute window.getComputedStyle(element)\nReturns an object containing the values of all CSS properties of an element, after applying active stylesheets and resolving any basic computation those values may contain Element.classList\nReturns a live DOMTokenList collection of the class attributes of the element\ncontains()\nadd()\nremove()\ntoggle()\nAdd if not contains, remove if contains Add and remove classes is the main way to manipulate the styles instead of manipulating style directly\nELement.src\nAbsolute url Element.getAttribute(\"src\")\nRelative url HTMLElement.dataset.${}\nThe dataset read-only property of the HTMLElement interface provides read/write access to custom data attributes (data-*) on elements. It exposes a map of strings (DOMStringMap) with an entry for each data-* attribute. Coordinates\nElement.getBoundingClientRect()\nwindow.pageXOffset\nwindow.pageYOffset\nwindow.scrollTo()\nOld way Element.scrollIntoView(scrollIntoViewOptions)\nModern way Scrolls the element‚Äôs ancestor containers such that the element on which scrollIntoView() is called is visible to the user. Intersection Observer API\nconst obsCallbackFn = function (entries, observer) {}; const obsOptions = { root: null, threshold: [0, 0.2], }; const observer = new IntersectionObserver(obsCallbackFn, obsOptions); observer.observe(element); Sticky nav Lazy loaded images Infinite scrolling Event and event handlers An event is something happened on the page JavaScript will generate an object which contains all the information about the event when an event occurs Event handler: the callback function accepts a single parameter: an object based on Event describing the event that has occurred, and it returns nothing In an event handler function (except arrow function), this always points to the element on which that handler is attached to /* para1: type of the event para2: event function handler */ document.querySelector(\".btn\").addEventListener(\"click\", function (e) {}); // pass parameters into callback function function callbackFn(e, para) {} e.addEventListener(\"click\", function (e) { callbackFn(e, para); }); // or function callbackFn(e) { console.log(this); } e.addEventListener(\"click\", callbackFn.bind(para)); Response with keyboard events // keyup, keypress, keydown --- three conditions of interacting with a key on the keyboard // usually choose keydown, happen as soon as we hit the key document.addEventListener(\"keydown\", function (e) {}); // use e.key to get which key is pressed removeEventListener() e.preventDefault() e.target A reference to the object onto which the event was dispatched e.currentTarget The current target for the event, as the event traverses the DOM Event propagation Capturing phase Event happens, travels all the way down from document to the target element Pass through every single parent of the target Target phase Events can be handled right at the target Bubbling phase Events bubble up from target element to document Normally addEventListener happens in this phase addEventListener(event, callbackFn, true) will listen to event in capture phase Not all events have these phases Stop propagation: e.stopPropagation() Event delegation Take advantage of event propagation that add one event listener to the container of similar events instead of add same event listeners to all of them Use e.target Matching strategy Guard clause (Guard null pointer) BOM The window object is supported by all browsers. It represents the browser‚Äôs window All global JavaScript objects, functions, and variables automatically become members of the window object Global variables are properties of the window object Global functions are methods of the window object Even the document object (of the HTML DOM) is a property of the window object Number, Math, Date, Intl and Timers Number\nAlways float numbers\nProperties\nMAX_SAFE_INTEGER MIN_SAFE_INTEGER Methods (Global functions ‚Äî Number can be omitted)\nNumber.parseInt(string, radix)\nparses a string argument and returns an integer of the specified radix\nstring: a string starting with an integer. Leading whitespace in this argument is ignored\nradix: the base in mathematical numeral systems\nNumber.parseFloat(string, radix)\nNumber.isNaN(value)\nDetermines whether the passed value is the number value NaN, and returns false if the input is not of the Number type Number.isFinite(value)\nDetermines whether the passed value is a finite number ‚Äî that is, it checks that a given value is a number, and the number is neither positive Infinity, negative Infinity, nor NaN Check if value is a number Number.isInteger(value)\nNumber.prototype.toFixed(digits)\nFormats a number using fixed-point notation Math\nDo type coercion itself\nMath.PI\nMath.max(val1, val2, valN)\nMath.min(val1, val2, valN)\nMath.random()\nReturns a floating-point, pseudo-random number that‚Äôs greater than or equal to 0 and less than 1, with approximately uniform distribution over that range ‚Äî which you can then scale to your desired range Math.trunc(val)\nReturns the integer part of a number by removing any fractional digits Math.round(val)\nReturns the value of a number rounded to the nearest integer Math.ceil(val)\nAlways rounds up and returns the smaller integer greater than or equal to a given number Math.floor(val)\nAlways rounds down and returns the largest integer less than or equal to a given number\nCreate a random integer within [min, max]\nconst randomInt = (min, max) =\u003e Math.floor(Math.random() * (max - min) + 1) + min; Numeric separators\nconst diameter = 287_460_000_000; const price = 345_99; BigInt\nwith n suffix: 56435468453453453453453454344684868n Cannot mix BigInt and other types except logical operators and + with String Division of BigInt: works like C int Date\nnew Date() Returns a string representing the current time new Date(dateString) ISO 8601 format (YYYY-MM-DDTHH:mm:ss.sssZ) new Date(year, monthIndex, day, hours, minutes, seconds, milliseconds) monthIndex starts with 0 new Date(value) value: an integer value representing the number of milliseconds since January 1, 1970, 00:00:00 UTC (the ECMAScript epoch, equivalent to the UNIX epoch), with leap seconds ignored getFullYear() getMonth() getDate() getDay() 0 represents Sunday getHours() getMinutes() getSeconds() getTime() Returns the number of milliseconds since the epoch The return value is called timestamp set...() toISOString() Date.now() Returns the current timestamp Intl\nThe namespace for the ECMAScript Internationalization API, which provides language sensitive string comparison, number formatting, and date and time formatting Intl.DateTimeFormat(locale, options).format(date) Formats a date according to the locale and formatting options options Intl.NumberFormat(locale, options).format(num) Formats a number Timers\nsetTimeout(callbackFn, dalay, param1, param2, paramn)\nSets a timer which executes a function or specified piece of code once the timer expires Returns an timeout ID which uniquely identifies the timeout delay: in milliseconds param: additional arguments which are passed through to the function specified by functionRef setTimeout() is an asynchronous function, meaning that the timer function will not pause execution of other functions in the functions stack clearTimeout(timeoutID)\ncancels a timeout previously established by calling setTimeout() If the parameter provided does not identify a previously established action, this method does nothing setInterval(callbackFn, delay, params)\nReturns an interval ID which uniquely identifies the interval\nRepeatedly calls a function or executes a code snippet, with a fixed time delay between each call\ncallbackFn is not called immediately, actually get called after one second\nSolution:\ncallbackFn(); const timer = setInterval(callbackFn, delay); clearInterval(intervalID)\nOOP In JavaScript Prototype and Object In terms of Class and Instance (but not the same) JavaScript doesn‚Äôt have Class Objects are linked to a prototype object Prototypal inheritance/delegation: the prototype contains methods that are accessible to all objects linked to that prototype Three ways of implementing OOP in JavaScript Constructor functions Technique to create objects from a function This is how built-in objects like Arrays, Maps or Sets are actually implemented ES6 Classes Modern alternative to constructor function syntax ‚ÄúSyntactic sugar‚Äù: works like constructor functions behind the scenes Do NOT behave like classical OOP Object.create() instanceof operator Constructor function Syntax\nconst ClassName = function (field1, field2) { this.field1 = field1; this.field2 = field2; }; ClassName.prototype.method1 = function () {}; ClassName.prototype.method2 = function () {}; const obj = new ClassName(para1, para2); Works done behind new\nAn empty object is created The function is called, this is linked to the empty object The empty object is linked to prototype Return the newly created object automatically Never declare methods in constructor functions\nEvery object in JavaScript automatically has a property prototype\nEvery object that is created by a certain constructor function will get access to all the methods and properties that we define on the constructors prototype property\nClassName.prototype is an object which is the prototype of the obj\nobj.__proto__ === ClassName.prototype ClassName.prototype.isPrototypeOf(obj) === true ClassName.prototype.isPrototypeOf(ClassName) === false ClassName.prototype.constructor === ClassName Prototype chain\n// the Behavior of the top prototype chain Object.__proto__ === Function.prototype; Function.__proto__ === Function.prototype; Function.prototype.prototype === undefined; Object.__proto__.__proto__ === Object.prototype; Object.__proto__.__proto__.__proto__ === null; A good explanation of this messy behavior\nStatic methods\nMethods attached to the constructor function instead of its prototype\nClassName.helper = function () {}; ES6 Classes Not the actual Class, just another way of using constructor functions\nSyntax\nclass ClassName { constructor(field1, field2) { this.field1 = field1; this.field2 = field2; } method1() {} method2() {} static helper() {} } Getter and setter\nExisted to make code more clear class Person { constructor(birthYear) { this.birthYear = birthYear; } // getter get birth() { return this.birthYear; } // setter set birth(birth) { this.birthYear = birth; } } const sam = new Person(2000); console.log(sam.birth); // not sam.birth() sam.birth = 30; // will change the birthYear Object.create Syntax\nconst ClassName() {} const obj = Object.create(ClassName); Be aware of the difference: NOT ‚Äúfake class‚Äù\nInheritance Constructor function\nconst Person = function (firstName, birthYear) { this.firstName = firstName; this.birthYear = birthYear; }; Person.prototype.calcAge = function () { console.log(2037 - this.birthYear); }; const Student = function (firstName, birthYear, course) { Person.call(this, firstName, birthYear); this.course = course; }; // Linking prototypes Student.prototype = Object.create(Person.prototype); Student.prototype.constructor = Student; Student.prototype.introduce = function () { console.log(`My name is ${this.firstName} and I study ${this.course}`); }; ES6 Classes\nclass PersonCl { constructor(fullName, birthYear) { this.fullName = fullName; this.birthYear = birthYear; } // Instance methods calcAge() { console.log(2037 - this.birthYear); } greet() { console.log(`Hey ${this.fullName}`); } // Static method static hey() { console.log(\"Hey there üëã\"); } } class StudentCl extends PersonCl { constructor(fullName, birthYear, course) { // Always needs to happen first! super(fullName, birthYear); this.course = course; } introduce() { console.log(`My name is ${this.fullName} and I study ${this.course}`); } greet() { console.log(\"Hi\"); } } Encapsulation JavaScript doesn‚Äôt have real private\nProtected fields and methods\nJust add a _ before the name to indicate it is protected Faked encapsulation Private Class fields and methods\nTruly encapsulation\nclass Account { // 1) Public fields (instances) locale = navigator.language; // 2) Private fields (instances) #movements = []; #pin; constructor(owner, currency, pin) { this.owner = owner; this.currency = currency; this.#pin = pin; console.log(`Thanks for opening an account, ${owner}`); } // 3) Public methods // Public interface getMovements() { return this.#movements; } deposit(val) { this.#movements.push(val); return this; } withdraw(val) { this.deposit(-val); return this; } requestLoan(val) { if (this.#approveLoan(val)) { this.deposit(val); console.log(`Loan approved`); return this; } } static helper() { console.log(\"Helper\"); } // 4) Private methods #approveLoan(val) { return true; } } Asynchronous JavaScript Synchronous code is executed line by line Long-running operations block code execution Asynchronous code is executed after a task that runs in the background finishes Asynchronous code is non-blocking AJAX Asynchronous JavaScript And XML\nAllow us to communicate with remote web servers in an asynchronous way\nWith AJAX calls, we can request data from web server dynamically\nXML data format is not used anymore\nJSON is the most popular data format now\nOld way\nconst request = new XMLHttpRequest(); request.open(\"GET\", ${url}); request.send(); request.addEventListener(\"load\", function() { const [data] = JSON.parse(this.responseText); ... }); Call back hell\nThe problem of nested callback functions for executing asynchronous operations in order Modern way\nFetch API\nfetch(url) Starts the process of fetching a resource from the network, returning a promise which is fulfilled once the response is available Only rejects when a network error is encountered Promise.prototype.then(resolve, reject) It immediately returns an equivalent Promise object, allowing you to chain calls to other promise methods resolve(value) Its return value becomes the fulfillment value of the promise returned by then() The function is called with the following arguments value: The value that the promise was fulfilled with If it is not a function, it is internally replaced with an identity function ((x) =\u003e x) which simply passes the fulfillment value forward reject(error) Its return value becomes the fulfillment value of the promise returned by catch() The function is called with the following arguments error: The error object that the promise was rejected with If it is not a function, it is internally replaced with a thrower function ((x) =\u003e { throw x; }) which throws the rejection reason it received Promise.prototype.catch() It is a shortcut for Promise.prototype.then(undefined, reject) Promise.prototype.finally(final) Promise is consumed and new promise is built and settled during then(), therefore asynchronous operations are executed in order Actually it is still nested, but it is coded in a non-nested way then() is actually a new promisification (build -\u003e callback -\u003e settled) Example\nconst getJSON = function (url, errorMsg = \"Something went wrong\") { return fetch(url).then(response =\u003e { if (!response.ok) throw new Error(`${errorMsg} (${response.status})`); return response.json(); // create a new promise }); }; const getCountryData = function (country) { // Country 1 getJSON( `https://restcountries.eu/rest/v2/name/${country}`, \"Country not found\" ) .then(data =\u003e { renderCountry(data[0]); const neighbour = data[0].borders[0]; if (!neighbour) throw new Error(\"No neighbour found!\"); // Country 2 return getJSON( `https://restcountries.eu/rest/v2/alpha/${neighbour}`, \"Country not found\" ); }) .then(data =\u003e renderCountry(data)) .catch(err =\u003e { console.error(`${err} üí•üí•üí•`); renderError(`Something went wrong üí•üí• ${err.message}. Try again!`); }); }; Promises An object that is used as a placeholder for the future result of an asynchronous operation\nWe no longer need to rely on events and callbacks passed into asynchronous functions to handle asynchronous results\nInstead of nesting callbacks, we can chain promises for a sequence of asynchronous operations\nA Promise is a JavaScript object that links producing code and consuming code\nLifecycle\nBuild promises\nPromise(function(resolve, reject) {})\nIt is primarily used to wrap callback-based APIs (the executor) that do not already support promises Promise.resolve(value)\nReturns a Promise object that is fulfilled with a given value Promise.reject(error)\nReturns a Promise object that is rejected with a given error Promisify callback functions\nSo that we can chain all promises (callbacks converted to promise workflow) // The para is the executor const wait = seconds =\u003e new Promise(function (resolve) { setTimeout(resolve, seconds * 1000); }); wait(2).then(function () { console.log(\"I have waited for 2 seconds\"); }); Pending\nExecute the executor (equivalent to callback execution) Settled\nAsynchronous tasks are finished\nFulfilled or Rejected\nmyPromise.state myPromise.result ‚Äúpending‚Äù undefined ‚Äúfulfilled‚Äù a result value ‚Äúrejected‚Äù an error object Consume promises\nConsuming promises is actually executing functions\nthen(), catch(), finally()\nasync and await\nasync and await make promises easier to write No more then Asynchronous operation written in synchronous way The keyword async before a function makes the function return a promise (always fulfilled not rejected) All functions invoked in async functions should be async not callback functions The await keyword can only be used inside an async function The await keyword makes the function pause the execution and wait for a resolved promise before it continues await returns the fulfillment value of the promise or thenableobject, or, if the expression is not thenable, the expression‚Äôs own value Use with error handling try...catch Rethrow the error in catch block will manually reject async function // Promisify geolocation const getPosition = function () { return new Promise(function (resolve, reject) { navigator.geolocation.getCurrentPosition(resolve, reject); }); }; const whereAmI = async function () { try { // Geolocation const pos = await getPosition(); const { latitude: lat, longitude: lng } = pos.coords; // Reverse geocoding const resGeo = await fetch( `https://geocode.xyz/${lat},${lng}?geoit=json` ); if (!resGeo.ok) throw new Error(\"Problem getting location data\"); const dataGeo = await resGeo.json(); return `You are in ${dataGeo.city}, ${dataGeo.country}`; } catch (err) { // Reject promise returned from async function throw err; } }; console.log(\"1: Will get location\"); // const city = whereAmI(); // console.log(city); // whereAmI() // .then(city =\u003e console.log(`2: ${city}`)) // .catch(err =\u003e console.error(`2: ${err.message} üí•`)) // .finally(() =\u003e console.log('3: Finished getting location')); // More async way (async function () { try { const city = await whereAmI(); console.log(`2: ${city}`); } catch (err) { console.error(`2: ${err.message} üí•`); } console.log(\"3: Finished getting location\"); })(); Promise.all()\nUsed for running Promises in parallel Takes an iterable of promises as input and returns a single Promise This returned promise fulfills when all of the input‚Äôs promises fulfill (including when an empty iterable is passed), with an array of the fulfillment values It rejects when any of the input‚Äôs promises rejects, with this first rejection reason Promise.race()\nTakes an iterable of promises as input and returns a single Promise This returned promise settles with the eventual state of the first promise that settles Usually use with a timer Promise.allSettled()\nTakes an iterable of promises as input and returns a single Promise This returned promise fulfills when all of the input‚Äôs promises settle (including when an empty iterable is passed), with an array of objects that describe the outcome of each promise Promise.any()\nTakes an iterable of promises as input and returns a single Promise This returned promise fulfills when any of the input‚Äôs promises fulfills, with this first fulfillment value It rejects when all of the input‚Äôs promises reject (including when an empty iterable is passed), with an AggregateError containing an array of rejection reasons The Event Loop JavaScript only has one thread of execution Web APIs environment (building / pending) -\u003e Callback queue or Microtasks queue (settled) -\u003e Call stack (consuming) Callback functions go into the callback queue Promises go into the microtasks queue Microtasks queue has priority over callback queue Event loop check if call stack has no execution and then pick a callback function from the callback queue to the call stack Web APIs Browser APIs All browsers have a set of built-in Web APIs to support complex operations, and to help accessing data DOM Fetch API Geoloaction API Strorage API Server APIS (Third party APIs) Modules Module\nReusable piece of code that encapsulate implementation details\nUsually a standalone file, but it doesn‚Äôt have to be\nimport { ${} } from ${}; // Dependency // module code export { ${} }; // Public API ES6 module\nModules stored in files, exactly one module per file\nES6 module Script Top-level variables Scoped to module Global Default mode Strict mode ‚ÄúSloppy‚Äù mode Top-level this undefined window Imports and exports Yes No HTML ","wordCount":"7125","inLanguage":"en","datePublished":"2023-02-27T00:00:00Z","dateModified":"2023-02-27T00:00:00Z","author":{"@type":"Person","name":"Jiayuan Zhang"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://hadjshell.github.io/posts/js-notes/"},"publisher":{"@type":"Organization","name":"Hadjshell","logo":{"@type":"ImageObject","url":"https://hadjshell.github.io/%3Clink%20/%20abs%20url%3E"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://hadjshell.github.io/ accesskey=h title="Hadjshell (Alt + H)"><img src=https://hadjshell.github.io/apple-touch-icon.png alt aria-label=logo height=35>Hadjshell</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://hadjshell.github.io/ title=Home><span>Home</span></a></li><li><a href=https://hadjshell.github.io/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://hadjshell.github.io/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://hadjshell.github.io/about/ title="About Me"><span>About Me</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>JavaScript Notes</h1><div class=post-meta><span title='2023-02-27 00:00:00 +0000 UTC'>Feb 27 2023</span>&nbsp;¬∑&nbsp;34 min&nbsp;¬∑&nbsp;Jiayuan Zhang</div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#introduction>Introduction</a></li><li><a href=#variables-and-values>Variables and Values</a></li><li><a href=#data-types>Data types</a></li><li><a href=#operators>Operators</a></li><li><a href=#expressions-and-statements>Expressions and Statements</a></li><li><a href=#flow-control>Flow control</a></li><li><a href=#functions>Functions</a></li><li><a href=#built-in-data-structure>Built-in Data structure</a><ul><li><a href=#arrays>Arrays</a></li><li><a href=#objects>Objects</a></li><li><a href=#sets>Sets</a></li><li><a href=#maps>Maps</a></li><li><a href=#strings>Strings</a></li><li><a href=#copy>Copy</a></li></ul></li><li><a href=#dom-and-events>DOM and Events</a><ul><li><a href=#dom>DOM</a></li><li><a href=#operations>Operations</a></li><li><a href=#event-and-event-handlers>Event and event handlers</a></li><li><a href=#bom>BOM</a></li></ul></li><li><a href=#number-math-date-intl-and-timers>Number, Math, Date, Intl and Timers</a></li><li><a href=#oop-in-javascript>OOP In JavaScript</a><ul><li><a href=#constructor-function>Constructor function</a></li><li><a href=#es6-classes>ES6 Classes</a></li><li><a href=#objectcreate><code>Object.create</code></a></li><li><a href=#inheritance>Inheritance</a></li><li><a href=#encapsulation>Encapsulation</a></li></ul></li><li><a href=#asynchronous-javascript>Asynchronous JavaScript</a><ul><li><a href=#ajax>AJAX</a></li><li><a href=#promises>Promises</a></li><li><a href=#the-event-loop>The Event Loop</a></li></ul></li><li><a href=#web-apis>Web APIs</a></li><li><a href=#modules>Modules</a></li><li><a href=#software-architecture>Software architecture</a><ul><li><a href=#mvc>MVC</a></li></ul></li></ul></nav></div></details></div><div class=post-content><hr><h2 id=introduction>Introduction<a hidden class=anchor aria-hidden=true href=#introduction>#</a></h2><ul><li><p>Three pillars in web development</p><ul><li>HTML - Content - Nouns</li><li>CSS - Style and layout - Adjectives</li><li><strong>JavaScript - The real programming language to build web applications - Verbs</strong></li></ul></li><li><p>What applications that JavaScript can build?</p><ul><li>Front-end apps<ul><li>React, Angular, Vue, etc.</li></ul></li><li>Back-end apps<ul><li>Node.js</li></ul></li><li>Native mobile apps<ul><li>React Native, Ionic</li></ul></li><li>Native desktop apps<ul><li>Electron</li></ul></li></ul></li><li><p>JavaScript is a multi-paradigm interpreted language</p><ul><li>Modern JavaScript uses just-in-time compilation (no portable files)</li></ul></li><li><p>JavaScript runtime</p><ul><li><p>Container including all the things that we need to use JavaScript</p></li><li><p>Different types of JavaScript runtime</p></li><li><p>Runtime in browsers</p><ul><li>JavaScript engine<ul><li>Program that executes JavaScript code</li><li>Example: V8 engine for chrome and node.js</li></ul></li><li>Web APIs</li><li>Callback queue</li></ul><p><img loading=lazy src=./imgs/js_engine.png alt=js_engine></p></li><li><p>Runtime in node.js</p><ul><li>JavaScript engine</li><li>C++ bindings and thread pool</li><li>Callback queue</li></ul></li></ul></li><li><p>JavaScript versions</p><ul><li>ES6 / ES2015: biggest update to this language</li><li>New updates to JS every single year</li><li>Modern JavaScript - after ES6</li><li>Don&rsquo;t break the web<ul><li>Backwards compatible</li><li>Old features are never removed</li></ul></li><li>How to use modern JavaScript today?<ul><li>ES5<ul><li>Fully supported in all browsers</li><li>Ready to be used today</li></ul></li><li>ES6+<ul><li>Well supported in all modern browsers</li><li>No support in older browsers</li><li>Can use most features in production with transpiling and polyfilling</li></ul></li></ul></li></ul></li><li><p>How to link JavaScript file to the HTML file?</p><ul><li>Incline script<ul><li>Put JavaScript code in the <code>&lt;script></code> block</li></ul></li><li>External JavaScript files<ul><li>Put code in the <code>.js</code> files in the same folder of HTML files</li><li>Tag <code>&lt;script src="">&lt;/script></code></li></ul></li></ul></li><li><p>Strict mode</p><ul><li>Put <code>'use strict';</code> statement in the beginning of the <code>.js</code> file</li><li>Forbid to do certain things</li><li>Create visible errors</li></ul></li><li><p>Script Loading</p><ul><li><p><img loading=lazy src=./imgs/script_loading.png alt=script_loading></p></li><li><p>Async in head</p><ul><li>Scripts not guaranteed to execute in order</li><li>Use for 3rd-party scripts where order doesn&rsquo;t matter</li></ul></li><li><p>Defer in head</p><ul><li>Scripts are executed in order</li><li>Overall best solution</li></ul></li></ul></li></ul><hr><h2 id=variables-and-values>Variables and Values<a hidden class=anchor aria-hidden=true href=#variables-and-values>#</a></h2><ul><li><p><code>$</code> is allowed in the variable&rsquo;s name</p></li><li><p>Declaration</p><ul><li><code>let</code><ul><li>Variables</li><li>Block-scope</li></ul></li><li><code>const</code><ul><li>Constant</li><li>Must be assigned with a value</li><li>Block-scope</li></ul></li><li><code>var</code><ul><li>Should be avoided</li><li>Old way of declaring variables before ES6</li><li>Function-scope</li><li>Creates property on <code>window</code> object</li></ul></li></ul></li><li><p>Hoisting</p><ul><li><p>Makes some types of variables accessible/usable in the code before they are actually declared</p></li><li><table><thead><tr><th></th><th>Hoisted</th><th>Initial Value</th></tr></thead><tbody><tr><td>function declarations</td><td>Yes</td><td>Actual function</td></tr><tr><td><code>var</code> variables</td><td>Yes</td><td><code>undefined</code></td></tr><tr><td><code>let</code> and <code>const</code> variables</td><td>No</td><td><code>&lt;uninitialised></code>, TDZ (Temperory Dead Zone)</td></tr><tr><td>function expressions and arrows</td><td>Depends on using <code>var</code> or <code>let const</code></td><td></td></tr></tbody></table></li></ul></li></ul><hr><h2 id=data-types>Data types<a hidden class=anchor aria-hidden=true href=#data-types>#</a></h2><ul><li><p>JavaScript has <strong>dynamic typing</strong>: we don&rsquo;t have to manually define the data type of the value stored in a variable. Instead, data types are determined automatically.</p></li><li><p><strong>In JavaScript, it is the value that has a type, not the variable</strong></p></li><li><p>Primitive data types</p><ul><li><p>Number</p><ul><li>Floating point numbers</li><li><code>NaN</code>: number value which means invalid number</li></ul></li><li><p>String</p><ul><li><p>Double quote or single quote</p></li><li><p>Template literals</p><ul><li><p>Syntax</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>const</span> <span class=nx>str</span> <span class=o>=</span> <span class=sb>`text </span><span class=si>${</span><span class=nx>varName1</span><span class=si>}</span><span class=sb> text </span><span class=si>${</span><span class=nx>expression</span><span class=si>}</span><span class=sb>`</span><span class=p>;</span>
</span></span></code></pre></div></li><li><p>Can also be used to create multiple line strings</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// Instead of doing this way
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>str</span> <span class=o>=</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;text \n\
</span></span></span><span class=line><span class=cl><span class=s2>text \n\
</span></span></span><span class=line><span class=cl><span class=s2>text&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=c1>// Using template literals
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>str</span> <span class=o>=</span> <span class=sb>`text
</span></span></span><span class=line><span class=cl><span class=sb>text
</span></span></span><span class=line><span class=cl><span class=sb>text`</span><span class=p>;</span>
</span></span></code></pre></div></li></ul></li></ul></li><li><p>Boolean</p><ul><li><code>true</code> or <code>false</code></li><li>Falsy values<ul><li>Values are not exactly false but will become false when we try to convert them into a boolean</li><li><code>0, "", undefined, null, NaN</code></li></ul></li><li>Truthy values<ul><li>Other values</li></ul></li></ul></li><li><p>Undefined</p><ul><li>Empty variable</li></ul></li><li><p>Null</p></li><li><p>Symbol</p><ul><li>Value that is unique and cannot be changed</li></ul></li><li><p>BigInt</p><ul><li>Large integers than the Number type cannot hold</li></ul></li></ul></li><li><p>Reference data type</p><ul><li>Object</li><li>Array</li><li>Function</li><li>Etc.</li></ul></li><li><p><code>typeof</code> operator</p><ul><li><code>typeof var</code> or <code>typeof value</code></li><li>Return a string</li></ul></li><li><p>Type conversion and coercion</p><ul><li><p>Casting syntax</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>const</span> <span class=nx>num</span> <span class=o>=</span> <span class=nb>Number</span><span class=p>(</span><span class=s2>&#34;text&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>str</span> <span class=o>=</span> <span class=nb>String</span><span class=p>(</span><span class=mi>10</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>bool</span> <span class=o>=</span> <span class=nb>Boolean</span><span class=p>(</span><span class=mi>0</span><span class=p>);</span>
</span></span></code></pre></div></li><li><p>Coercion</p><ul><li><code>+</code>: Number converts to String implicitly</li><li><code>-</code>, <code>*</code>, <code>/</code>: String converts to Number implicitly</li><li>Using logical operators or condition statement, value will be converted to boolean implicitly</li></ul></li></ul></li></ul><hr><h2 id=operators>Operators<a hidden class=anchor aria-hidden=true href=#operators>#</a></h2><ul><li>Mathematical operators<ul><li>Exponentiation operator: <code>**</code></li><li><code>+</code>, <code>+=</code> can be used for string</li></ul></li><li>Assignment operators</li><li>Abbreviating operators</li><li><code>++</code>, <code>--</code></li><li>Relational operators<ul><li><code>===</code>, <code>!==</code><ul><li>Strict equality operator</li><li>Doesn&rsquo;t perform type coercion</li></ul></li><li><code>==</code>, <code>!=</code><ul><li>Loose equality operator</li><li>Does perform type coercion</li></ul></li><li>Avoid using loose equality operator</li></ul></li><li>Logical operators<ul><li><strong>Use ANY data type, return ANY data type</strong>, short-circuiting</li><li>OR return the first truthy value or the last falsy value if all flasy</li><li>AND return the first falsy value or the last truthy value if all truthy</li></ul></li><li>Bitwise operators</li><li>Ternary operator</li><li>Operator precedence</li><li>Modern operators<ul><li>Spread operator <code>...</code><ul><li><code>...</code> works on iterables not objects</li><li>After ES2018, <code>...</code> works on objects too</li></ul></li><li>Nullish coalescing operator <code>??</code><ul><li>Introduced in ES2020</li><li>Returns its right-hand side operand when its left-hand side operand is <code>null</code> or <code>undefined</code>, and otherwise returns its left-hand side operand</li><li>Work with nullish value: <code>null</code> and <code>undeifined</code> without <code>0</code></li></ul></li><li>Logical assignment operator<ul><li>Introduced in ES2021</li><li><code>||=</code>, <code>??=</code>, <code>&&=</code></li></ul></li><li>Optional chaining <code>?.</code><ul><li>Introduced in ES2020</li><li>Check if a property or function is <code>undefined</code> or not</li><li>Usually used with <code>??</code></li></ul></li></ul></li></ul><hr><h2 id=expressions-and-statements>Expressions and Statements<a hidden class=anchor aria-hidden=true href=#expressions-and-statements>#</a></h2><hr><h2 id=flow-control>Flow control<a hidden class=anchor aria-hidden=true href=#flow-control>#</a></h2><ul><li><p><code>if-else</code></p><ul><li><p>This is allowed in JavaScript:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>const</span> <span class=nx>y</span> <span class=o>=</span> <span class=mi>2</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=p>(</span><span class=nx>y</span> <span class=o>===</span> <span class=mi>3</span><span class=p>)</span> <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>x</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>x</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>x</span><span class=p>);</span>
</span></span></code></pre></div></li></ul></li><li><p><code>switch</code></p></li><li><p><code>for</code></p></li><li><p><code>for-of</code></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>const</span> <span class=nx>arr</span> <span class=o>=</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>];</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=p>(</span><span class=kr>const</span> <span class=nx>item</span> <span class=k>of</span> <span class=nx>arr</span><span class=p>)</span> <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>item</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>obj</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>name</span><span class=o>:</span> <span class=s2>&#34;John&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>gender</span><span class=o>:</span> <span class=s2>&#34;male&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=p>(</span><span class=kr>const</span> <span class=p>[</span><span class=nx>key</span><span class=p>,</span> <span class=nx>value</span><span class=p>]</span> <span class=k>of</span> <span class=nb>Object</span><span class=p>.</span><span class=nx>entries</span><span class=p>(</span><span class=nx>obj</span><span class=p>))</span> <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>key</span><span class=p>,</span> <span class=nx>value</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>m</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Map</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=p>(</span><span class=kr>const</span> <span class=p>[</span><span class=nx>key</span><span class=p>,</span> <span class=nx>value</span><span class=p>]</span> <span class=k>of</span> <span class=nx>m</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><ul><li><code>continue</code> and <code>break</code> is allowed</li></ul></li><li><p><code>while</code></p></li><li><p><code>do while</code></p></li></ul><hr><h2 id=functions>Functions<a hidden class=anchor aria-hidden=true href=#functions>#</a></h2><ul><li><p>Functions in JavaScript are <strong>first-class objects</strong>, <strong>which means they are treated as variables</strong>, so in JavaScript we can</p><ul><li><em>Store functions in variables or properties</em></li><li><em>Pass functions as arguments to other functions</em></li><li><em>Return functions from functions</em></li><li><em>Call methods on functions</em></li></ul></li><li><p>Higher-order functions</p><ul><li><p>A function that receives another function as an argument, that returns a new function, or both</p></li><li><p>The function as an argument is called callback function</p><ul><li><code>funcArg.name</code> returns the name of the function</li></ul></li><li><p>The function that is returned is called returned function</p></li></ul></li><li><p>Syntax - <strong>function declaration</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kd>function</span> <span class=nx>funcName</span><span class=p>()</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// example
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>function</span> <span class=nx>calcAge1</span><span class=p>(</span><span class=nx>birthYear</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=mi>2023</span> <span class=o>-</span> <span class=nx>birthYear</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div></li><li><p>Functions can be invoked before their declarations</p></li><li><p>Anonymous function - <strong>function expression</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>const</span> <span class=nx>funcName</span> <span class=o>=</span> <span class=kd>function</span> <span class=p>()</span> <span class=p>{};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// example
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>calcAge2</span> <span class=o>=</span> <span class=kd>function</span> <span class=p>(</span><span class=nx>birthYear</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=mi>2023</span> <span class=o>-</span> <span class=nx>birthYear</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span></code></pre></div><ul><li>Cannot be invoked before function expression</li></ul></li><li><p>Arrow function - <strong>function expression</strong></p><ul><li>A special form of anonymous function</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>const</span> <span class=nx>funcName</span> <span class=o>=</span> <span class=nx>para</span> <span class=p>=&gt;</span> <span class=nx>exp</span><span class=p>;</span> <span class=c1>// without {}, we don&#39;t need to return the value explicitly
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>funcName</span> <span class=o>=</span> <span class=p>(</span><span class=nx>para1</span><span class=p>,</span> <span class=nx>para2</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{};</span> <span class=c1>// with {}, we define the function in the traditional way
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=c1>// example
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>calcAge3</span> <span class=o>=</span> <span class=nx>birthYear</span> <span class=p>=&gt;</span> <span class=mi>2023</span> <span class=o>-</span> <span class=nx>birthYear</span><span class=p>;</span>
</span></span></code></pre></div><ul><li>Helpful for one-line functions</li><li>Does <strong>not</strong> get its own <code>this</code> keyword</li></ul></li><li><p>Default parameters</p><ul><li>Use default parameters whenever is possible</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kd>function</span> <span class=nx>createBooking</span><span class=p>(</span>
</span></span><span class=line><span class=cl>  <span class=nx>flightNum</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>numPassengers</span> <span class=o>=</span> <span class=mi>1</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>price</span> <span class=o>=</span> <span class=mi>199</span> <span class=o>*</span> <span class=nx>numPassengers</span>
</span></span><span class=line><span class=cl><span class=p>)</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>createBooking</span><span class=p>(</span><span class=s2>&#34;LH123&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nx>createBooking</span><span class=p>(</span><span class=s2>&#34;LH123&#34;</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>800</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nx>createBooking</span><span class=p>(</span><span class=s2>&#34;LH123&#34;</span><span class=p>,</span> <span class=kc>undefined</span><span class=p>,</span> <span class=mi>1000</span><span class=p>);</span> <span class=c1>// skip a parameter to use its default value
</span></span></span></code></pre></div></li><li><p>Immediately invoked function expression</p><ul><li><p>Called once and never be called again</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=p>(</span><span class=kd>function</span> <span class=p>()</span> <span class=p>{})();</span>
</span></span><span class=line><span class=cl><span class=p>(()</span> <span class=p>=&gt;</span> <span class=p>{})();</span>
</span></span></code></pre></div></li></ul></li><li><p>Functions in JavaScript is passed-by-value</p></li><li><p><code>arguments</code></p><ul><li>An Array-like object accessible inside function that contains the values of the arguments passed to that function</li></ul></li><li><p><code>this</code></p><ul><li><p>Depends on how the function is called, which means it is <strong>dynamic</strong></p></li><li><p>Alone, <code>this</code> refers to the <strong>global object</strong> (<code>Window</code> in web browser)</p></li><li><p>In method, <code>this</code> refers to the <strong>object</strong></p></li><li><p>In regular function, <code>this</code> refers to <strong><code>undefined</code></strong> (in strict mode; otherwise refers to <code>window</code>)</p><blockquote><p>When a function is used as a <strong>callback function</strong>, <code>this</code> is lost</p></blockquote></li><li><p>In arrow function, do <strong>NOT</strong> get its own <code>this</code></p></li><li><p>In an event handler function (<em>not defined as arrow function</em>), <code>this</code> always refers to the <strong>element</strong> on which that handler is attached to</p></li><li><p>Manually tell how it should behave</p><ul><li><p><code>func.call(thisArg, args)</code></p><ul><li>Calls the function with a given <code>this</code> value and arguments provided individually</li></ul></li><li><p><code>func.apply(thisArg, argsArr)</code></p><ul><li>Calls the specified function with a given <code>this</code> value, and <code>arguments</code> provided as an array</li><li>Equals to <code>func.call(thisArg, ...argsArr)</code></li><li>Stick to <code>call</code></li></ul></li><li><p><code>func.bind(thisArg, &lt;args>)</code></p><ul><li>Creates a new function that, when called, has its <code>this</code> keyword set to the provided value, with a given sequence of arguments preceding any provided when the new function is called</li><li>If pass <code>args</code>, it will be preset when the <code>func</code> is called &mdash; Partial application</li><li>Pass <code>null</code> to <code>thisArg</code> if you want to create a partial application without having <code>this</code> inside</li></ul></li></ul></li></ul></li><li><p>Closures</p><ul><li>A function always has access to the variable environment of the execution context (call stack) in which it was created, even if that execution context is removed from the stack</li><li>Closure has high priority over scope chain</li></ul></li><li><p>Chaining methods</p><ul><li>Avoid chaining the methods that mutate the original object</li></ul></li><li><p>Functional programming</p><ul><li>Declarative paradigm</li><li>Based on the idea of writing software by combining many pure functions, avoiding side effects and mutating data</li><li>Pure functions are stateless</li></ul></li></ul><hr><h2 id=built-in-data-structure>Built-in Data structure<a hidden class=anchor aria-hidden=true href=#built-in-data-structure>#</a></h2><h3 id=arrays>Arrays<a hidden class=anchor aria-hidden=true href=#arrays>#</a></h3><ul><li><p>Syntax</p><ul><li>Literal syntax</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>const</span> <span class=nx>array</span> <span class=o>=</span> <span class=p>[</span><span class=nx>element1</span><span class=p>,</span> <span class=nx>element2</span><span class=p>];</span>
</span></span></code></pre></div><ul><li>Object</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>const</span> <span class=nx>array</span> <span class=o>=</span> <span class=k>new</span> <span class=nb>Array</span><span class=p>(</span><span class=nx>element1</span><span class=p>,</span> <span class=nx>element2</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>array2</span> <span class=o>=</span> <span class=k>new</span> <span class=nb>Array</span><span class=p>(</span><span class=nx>len</span><span class=p>);</span> <span class=c1>// Empty array with length len
</span></span></span></code></pre></div></li><li><p>Can put values of different data types in one array</p></li><li><p>Array is also an object</p></li><li><p>Basic operations</p><ul><li><p><code>array.length</code></p><ul><li>Return the length of the array</li></ul></li><li><p><code>push</code></p><ul><li>Add new element to the end of the array</li><li>Return the length of the new array</li></ul></li><li><p><code>unshift</code></p><ul><li>Add new element to the start of the array</li><li>Return the length of the new array</li></ul></li><li><p><code>pop</code></p><ul><li>Remove the last element of the array</li><li>Return the removed element</li></ul></li><li><p><code>shift</code></p><ul><li>Removed the first element of the array</li><li>Return the removed element</li></ul></li><li><p><code>indexOf</code></p><ul><li>Return the index of the element</li></ul></li><li><p><code>includes</code></p><ul><li>Check whether the element is included in the array</li></ul></li><li><p>Destructing array</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>const</span> <span class=nx>arr</span> <span class=o>=</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>];</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=p>[</span><span class=nx>x</span><span class=p>,</span> <span class=nx>y</span><span class=p>,</span> <span class=nx>z</span><span class=p>]</span> <span class=o>=</span> <span class=nx>arr</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=c1>// skip elements
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=p>[</span><span class=nx>x</span><span class=p>,</span> <span class=p>,</span> <span class=nx>z</span><span class=p>]</span> <span class=o>=</span> <span class=nx>arr</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=c1>// default value
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=p>[</span><span class=nx>a</span> <span class=o>=</span> <span class=mi>0</span><span class=p>,</span> <span class=nx>b</span> <span class=o>=</span> <span class=mi>0</span><span class=p>,</span> <span class=nx>c</span> <span class=o>=</span> <span class=mi>0</span><span class=p>,</span> <span class=nx>d</span> <span class=o>=</span> <span class=mi>0</span><span class=p>]</span> <span class=o>=</span> <span class=nx>arr</span><span class=p>;</span> <span class=c1>// without default value, d will be undefined
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=c1>// switch using this technique
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>[</span><span class=nx>a</span><span class=p>,</span> <span class=nx>b</span><span class=p>]</span> <span class=o>=</span> <span class=p>[</span><span class=nx>b</span><span class=p>,</span> <span class=nx>a</span><span class=p>];</span>
</span></span></code></pre></div></li><li><p>Spread array (unpack)</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>const</span> <span class=nx>arr</span> <span class=o>=</span> <span class=p>[</span><span class=mi>7</span><span class=p>,</span> <span class=mi>8</span><span class=p>,</span> <span class=mi>9</span><span class=p>];</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>newArr</span> <span class=o>=</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=p>...</span><span class=nx>arr</span><span class=p>];</span> <span class=c1>// [1, 2, 7, 8, 9]
</span></span></span></code></pre></div></li><li><p>Rest pattern (pack)</p><ul><li>The rest element must be the last element</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>const</span> <span class=nx>arr</span> <span class=o>=</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>4</span><span class=p>,</span> <span class=mi>5</span><span class=p>];</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=p>[</span><span class=nx>a</span><span class=p>,</span> <span class=nx>b</span><span class=p>,</span> <span class=p>...</span><span class=nx>others</span><span class=p>]</span> <span class=o>=</span> <span class=nx>arr</span><span class=p>;</span> <span class=c1>// a = 1, b = 2, others = [3, 4, 5]
</span></span></span></code></pre></div><ul><li><p>Using spread and rest together can write more general functions</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kd>function</span> <span class=nx>add</span> <span class=p>(...</span><span class=nx>numbers</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>let</span> <span class=nx>sum</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span><span class=p>(</span><span class=kr>int</span> <span class=nx>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=nx>i</span> <span class=o>&lt;</span> <span class=nx>numbers</span><span class=p>.</span><span class=nx>length</span><span class=p>;</span> <span class=nx>i</span><span class=o>++</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=nx>sum</span> <span class=o>+=</span> <span class=nx>numbers</span><span class=p>[</span><span class=nx>i</span><span class=p>];</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>sum</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// All of following usages are available
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>add</span><span class=p>(</span><span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nx>add</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>4</span><span class=p>,</span> <span class=mi>5</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>x</span> <span class=o>=</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>];</span>
</span></span><span class=line><span class=cl><span class=nx>add</span><span class=p>(...</span><span class=nx>x</span><span class=p>);</span>
</span></span></code></pre></div></li></ul></li><li><p><code>entries</code></p><ul><li>Return a new Array Iterator object that contains the key/value pairs for each index in the array</li></ul></li><li><p><code>slice(start, end)</code></p><ul><li>Returns a shallow copy of a portion of an array into a new array object selected from <code>start</code> to <code>end</code> (<code>end</code> not included) where <code>start</code> and <code>end</code> represent the index of items in that array</li><li><code>start</code>, <code>end</code> can be negative</li><li>Create a shallow copy of array: <code>arr.slice()</code></li></ul></li><li><p><code>splice(start, deleteCount)</code></p><ul><li>Works similar as <code>slice</code>, but <strong>change the original array</strong> by taking the extracted elements</li><li>Useful for deleting elements</li></ul></li><li><p><code>reverse</code></p><ul><li>Change the original array</li></ul></li><li><p><code>arr1.concat(arr2)</code></p><ul><li><p>Returns a new array, doesn&rsquo;t change the original arrays</p></li><li><p>Same effect:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=p>[...</span><span class=nx>arr1</span><span class=p>,</span> <span class=p>...</span><span class=nx>arr2</span><span class=p>];</span>
</span></span></code></pre></div></li></ul></li><li><p><code>join(separator)</code></p><ul><li>Returns a new string by concatenating all of the elements in an array, separated by commas or a specified separator string</li></ul></li><li><p><code>at</code></p><ul><li>Takes an integer value and returns the item at that index</li><li>Useful for accessing the last element <code>arr.at(-1)</code></li></ul></li><li><p><code>forEach(callbackFn)</code></p></li><li><p><code>forEach(function(element, index, array) {})</code></p></li><li><p><code>forEach((e, i, arr) => {})</code></p><ul><li>Executes a provided function once for each array element</li><li><code>element</code>: the current element being processed in the array</li><li><code>index</code>: the index of the current element being processed in the array</li><li><code>array</code>: the array that calls <code>forEach</code></li><li>Throw-away parameter: use <code>_</code> to name it</li></ul></li><li><p><code>map(callbackFn)</code></p><ul><li><strong>Creates a new array</strong> populated with the results of calling a provided function on every element in the calling array</li></ul></li><li><p><code>filter(callbackFn)</code></p><ul><li>Returns a <strong>shallow copy</strong> of a portion of the given array, filtered down to just the elements from the given array that pass the test implemented by the provided function. If no elements pass the test, an empty array will be returned</li><li><code>callbackFn</code> returns a boolean value</li></ul></li><li><p><code>reduce(callbackFn, initialValue)</code></p></li><li><p><code>reduce(function(accumulator, currentValue, currentIndex, array) {}, initiaValue)</code></p><ul><li>Executes a user-supplied &ldquo;reducer&rdquo; callback function on each element of the array, in order, passing in the return value from the calculation on the preceding element. The final result of running the reducer across all elements of the array is a <strong>single value</strong></li><li><code>accumulator</code>: the value resulting from the previous call to <code>callbackFn</code></li><li><code>initialValue</code>: a value to which <code>accumulator</code> is initialized the first time the callback is called. If <code>initialValue</code> is specified, <code>callbackFn</code> starts executing with the first value in the array as <code>currentValue</code>. If <code>initialValue</code> is <em>not</em> specified, <code>accumulator</code> is initialized to the first value in the array, and <code>callbackFn</code> starts executing with the second value in the array as <code>currentValue</code>. In this case, if the array is empty (so that there&rsquo;s no first value to return as <code>accumulator</code>), an error is thrown</li></ul></li><li><p><code>find(callbackFn)</code></p></li><li><p><code>findLast(callbackFn)</code></p><ul><li>Returns the first / last element in the provided array that satisfies the provided testing function. If no values satisfy the testing function, <code>undefined</code> is returned</li><li><code>callbackFn</code> returns a boolean value</li></ul></li><li><p><code>findIndex(callbackFn)</code></p></li><li><p><code>findLastIndex(callbackFn)</code></p><ul><li>Returns the index of the first / last element in an array that satisfies the provided testing function. If no elements satisfy the testing function, -1 is returned</li></ul></li><li><p><code>some(callbackFn)</code></p><ul><li>Tests whether at least one element in the array passes the test implemented by the provided function</li><li>Returns a boolean value</li><li>It doesn&rsquo;t modify the array</li></ul></li><li><p><code>every(callbackFn)</code></p><ul><li>Tests whether all elements in the array pass the test implemented by the provided function</li></ul></li><li><p><code>flat(depth)</code></p><ul><li>Creates a new array with all sub-array elements concatenated into it recursively up to the specified depth</li><li><code>depth</code>: The depth level specifying how deep a nested array structure should be flattened. Defaults to 1</li></ul></li><li><p><code>flatMap(callbackFm)</code></p><ul><li><p>Returns a new array formed by applying a given callback function to each element of the array, and then flattening the result by one level</p></li><li><p>Identical to a <code>map()</code>followed by a <code>flat()</code> of depth 1 (<code>arr.map(callbackFn).flat()</code>), but slightly more efficient than calling those two methods separately</p><blockquote><p><a href=https://medium.com/@daveford/map-versup-flatmap-14780ab01d2b>A use-case</a></p></blockquote></li></ul></li><li><p><code>sort(compareFn)</code></p></li><li><p><code>sort((a, b) => {})</code></p><ul><li><p>Sorts the elements of an array <em><a href=https://en.wikipedia.org/wiki/In-place_algorithm>in place</a></em> and returns the reference to the same array, now sorted</p></li><li><p>The default sort order is ascending, built upon converting the elements into <strong>strings</strong>, then comparing their sequences of UTF-16 code units values</p></li><li><table><thead><tr><th style=text-align:left><code>compareFn(a, b)</code> return value</th><th style=text-align:left>sort order</th></tr></thead><tbody><tr><td style=text-align:left>> 0</td><td style=text-align:left>sort <code>a</code> after <code>b</code></td></tr><tr><td style=text-align:left>&lt; 0</td><td style=text-align:left>sort <code>a</code> before <code>b</code></td></tr><tr><td style=text-align:left>=== 0</td><td style=text-align:left>keep original order of <code>a</code> and <code>b</code></td></tr></tbody></table></li><li><p>Comparing numbers</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// ascending order
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>function</span> <span class=nx>compareNumbers</span><span class=p>(</span><span class=nx>a</span><span class=p>,</span> <span class=nx>b</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=nx>a</span> <span class=o>-</span> <span class=nx>b</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// descending order
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>function</span> <span class=nx>compareNumbers</span><span class=p>(</span><span class=nx>a</span><span class=p>,</span> <span class=nx>b</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=nx>b</span> <span class=o>-</span> <span class=nx>a</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div></li></ul></li><li><p><code>fill(value)</code></p></li><li><p><code>fill(value, start, end)</code></p><ul><li>Changes all elements in an array to a static value, from a start index (default <code>0</code>) to an end index (default <code>array.length</code>)</li><li>Returns the modified array</li></ul></li><li><p><code>Array.from(arrayLike)</code></p></li><li><p><code>Array.from(arrayLike, mapFn)</code></p><ul><li><p>Creates a new, shallow-copied <code>Array</code> instance from an iterable or array-like object</p></li><li><p><code>Array.from()</code> lets you create <code>Array</code> from:</p><ul><li><p><a href=https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Iteration_protocols>Iterable objects</a> (objects such as <code>Map</code> and <code>Set</code>); or, if the object is not iterable</p></li><li><p>Array-like objects (objects with a <code>length</code> property and indexed elements)</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>const</span> <span class=nx>arr</span> <span class=o>=</span> <span class=nb>Array</span><span class=p>.</span><span class=nx>from</span><span class=p>({</span> <span class=nx>length</span><span class=o>:</span> <span class=mi>7</span> <span class=p>},</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=mi>1</span><span class=p>);</span>
</span></span></code></pre></div></li></ul></li></ul></li><li><p><img loading=lazy src=./imgs/array_method.png alt=array_method></p></li></ul></li></ul><h3 id=objects>Objects<a hidden class=anchor aria-hidden=true href=#objects>#</a></h3><ul><li><p>Syntax</p><ul><li>Literal syntax</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>const</span> <span class=nx>obj</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>key1</span><span class=o>:</span> <span class=nx>value1</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>key2</span><span class=o>:</span> <span class=nx>value2</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>func</span><span class=o>:</span> <span class=kd>function</span> <span class=p>()</span> <span class=p>{},</span> <span class=c1>// Methods
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>};</span>
</span></span></code></pre></div><ul><li><p><code>key</code> are always <strong>strings</strong></p></li><li><p>It&rsquo;s not a block scope</p></li><li><p>Enhanced object literals</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>const</span> <span class=nx>openingHours</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>fri</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>open</span><span class=o>:</span> <span class=mi>11</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>close</span><span class=o>:</span> <span class=mi>23</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>arr</span> <span class=o>=</span> <span class=p>[</span><span class=s2>&#34;name&#34;</span><span class=p>,</span> <span class=s2>&#34;gender&#34;</span><span class=p>];</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>restaurant</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=c1>// First enhancement: if the property name is the same as the variable name
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>openingHours</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=c1>// Second enhancement: function in object
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>check</span><span class=p>()</span> <span class=p>{},</span>
</span></span><span class=line><span class=cl>  <span class=c1>// Third enhancement: computing property name
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=p>[</span><span class=nx>arr</span><span class=p>[</span><span class=mi>0</span><span class=p>]]</span><span class=o>:</span> <span class=s2>&#34;John&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span></code></pre></div></li></ul></li><li><p>In object methods, we can use <code>this</code> keyword</p><ul><li>Unlike Java, <code>this</code> must be used explicitly if you need to use the reference of the object</li></ul></li><li><p>Basic operations</p><ul><li><p>Access a value</p><ul><li><code>obj.key</code></li><li><code>obj["key"]</code><ul><li>The string can be an expression which holds the value of the string of the key name</li></ul></li><li>Return <code>undefined</code> if there is not such a key</li></ul></li><li><p>Create a new property on the current object</p><ul><li><code>obj.newKey = val;</code></li><li><code>obj["newKey"] = val;</code></li></ul></li><li><p><code>Object.keys(obj)</code></p><ul><li>Return an array of object property names</li></ul></li><li><p><code>Object.values(obj)</code></p><ul><li>Return an array of object property values</li></ul></li><li><p><code>Object.entries(obj)</code></p><ul><li>Return an array of object property key-value pairs</li></ul></li><li><p><code>Object.freeze(obj)</code></p><ul><li>Make the object immutable</li><li>However, it&rsquo;s a shallow freeze</li></ul></li><li><p>Destructing objects</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>const</span> <span class=nx>restaurant</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>name</span><span class=o>:</span> <span class=s2>&#34;YO&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>menu</span><span class=o>:</span> <span class=p>[</span><span class=s2>&#34;Ice cream&#34;</span><span class=p>,</span> <span class=s2>&#34;burger&#34;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=nx>openingHours</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>fri</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>open</span><span class=o>:</span> <span class=mi>11</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>close</span><span class=o>:</span> <span class=mi>23</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=nx>sat</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>open</span><span class=o>:</span> <span class=mi>0</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>close</span><span class=o>:</span> <span class=mi>24</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=nb>sun</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>open</span><span class=o>:</span> <span class=mi>0</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>close</span><span class=o>:</span> <span class=mi>24</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=p>{</span> <span class=nx>name</span><span class=p>,</span> <span class=nx>openingHours</span><span class=p>,</span> <span class=nx>menu</span> <span class=p>}</span> <span class=o>=</span> <span class=nx>restaurant</span><span class=p>;</span> <span class=c1>// order doesn&#39;t matter here
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=p>{</span> <span class=nx>name</span><span class=o>:</span> <span class=nx>x</span><span class=p>,</span> <span class=nx>openingHours</span><span class=o>:</span> <span class=nx>y</span><span class=p>,</span> <span class=nx>menu</span><span class=o>:</span> <span class=nx>z</span> <span class=p>}</span> <span class=o>=</span> <span class=nx>restaurant</span><span class=p>;</span> <span class=c1>// new variable name
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=p>{</span> <span class=nx>menu</span> <span class=o>=</span> <span class=p>[]</span> <span class=p>}</span> <span class=o>=</span> <span class=nx>retaurant</span><span class=p>;</span> <span class=c1>// default value
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>fri</span><span class=o>:</span> <span class=p>{</span> <span class=nx>open</span><span class=p>,</span> <span class=nx>close</span> <span class=p>},</span>
</span></span><span class=line><span class=cl><span class=p>}</span> <span class=o>=</span> <span class=nx>openingHours</span><span class=p>;</span> <span class=c1>//	nested objetcs
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=c1>// switch
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>({</span> <span class=nx>a</span><span class=p>,</span> <span class=nx>b</span> <span class=p>}</span> <span class=o>=</span> <span class=p>{</span> <span class=nx>b</span><span class=p>,</span> <span class=nx>a</span> <span class=p>});</span> <span class=c1>// () is required
</span></span></span></code></pre></div></li><li><p>Spread</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>const</span> <span class=nx>newRestaurant</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=p>...</span><span class=nx>restaurant</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>founder</span><span class=o>:</span> <span class=s2>&#34;John&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span></code></pre></div></li><li><p>Rest</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>const</span> <span class=p>{</span> <span class=nx>fri</span><span class=p>,</span> <span class=p>...</span><span class=nx>otherDays</span> <span class=p>}</span> <span class=o>=</span> <span class=nx>openHours</span><span class=p>;</span>
</span></span></code></pre></div></li></ul></li></ul><h3 id=sets>Sets<a hidden class=anchor aria-hidden=true href=#sets>#</a></h3><ul><li><p>Syntax</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>const</span> <span class=nx>s</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Set</span><span class=p>([]);</span>
</span></span></code></pre></div></li><li><p>Basic operations</p><ul><li><p><code>.size</code></p></li><li><p><code>has</code></p><ul><li>Check if the set contains the element</li></ul></li><li><p><code>add</code></p><ul><li>Add an element to a set if it is not included</li></ul></li><li><p><code>delete</code></p><ul><li>Delete an element</li></ul></li><li><p><code>clear</code></p><ul><li>Delete all elements</li></ul></li><li><p>Convert set to array</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>const</span> <span class=nx>arr</span> <span class=o>=</span> <span class=p>[...</span><span class=nx>s</span><span class=p>];</span>
</span></span></code></pre></div></li><li><p><code>forEach(function(value, key, set) {})</code></p><ul><li><code>key</code> and <code>value</code> are the same</li></ul></li></ul></li></ul><h3 id=maps>Maps<a hidden class=anchor aria-hidden=true href=#maps>#</a></h3><ul><li><p>Syntax</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>const</span> <span class=nx>m</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Map</span><span class=p>([</span>
</span></span><span class=line><span class=cl>  <span class=p>[</span><span class=nx>k1</span><span class=p>,</span> <span class=nx>v1</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=p>[</span><span class=nx>k2</span><span class=p>,</span> <span class=nx>v2</span><span class=p>],</span>
</span></span><span class=line><span class=cl><span class=p>]);</span>
</span></span></code></pre></div></li><li><p>Difference from objects: <strong><code>key</code> in a map can be any data type</strong></p></li><li><p>Basic operations</p><ul><li><p><code>.size</code></p><ul><li>Return the size of the map</li></ul></li><li><p><code>set(key, value)</code></p><ul><li>Add a new element into map</li><li>Return the changed map</li><li>Can be chained <code>m.set(a, b).set(c, d)</code></li></ul></li><li><p><code>get(key)</code></p><ul><li>Return the value according to the key</li><li>Return <code>undefined</code> if there is not such a key</li></ul></li><li><p><code>has()</code></p><ul><li>Check if a map has a certain key</li></ul></li><li><p><code>delete(key)</code></p><ul><li>Delete an element according to the key</li></ul></li><li><p><code>keys()</code></p><ul><li>Return an iterable of keys in map</li><li><code>[...m.keys()]</code> to get the array of keys</li></ul></li><li><p><code>values()</code></p><ul><li>Return an iterable of values in map</li></ul></li><li><p><code>entries()</code></p></li><li><p>Convert object to map</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>const</span> <span class=nx>m</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Map</span><span class=p>(</span><span class=nb>Object</span><span class=p>.</span><span class=nx>entries</span><span class=p>(</span><span class=nx>obj</span><span class=p>));</span>
</span></span></code></pre></div></li><li><p>Convert map to array</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>const</span> <span class=nx>arr</span> <span class=o>=</span> <span class=p>[...</span><span class=nx>m</span><span class=p>];</span>
</span></span></code></pre></div></li><li><p><code>forEach(function(value, key, map) {})</code></p></li></ul></li></ul><h3 id=strings>Strings<a hidden class=anchor aria-hidden=true href=#strings>#</a></h3><ul><li><p>Whenever call a method on a string, JavaScript will automatically create a string object (boxing)</p></li><li><p>Operations</p><ul><li><p><code>[]</code></p><ul><li>Access the character (still a string)</li></ul></li><li><p><code>indexOf</code></p><ul><li>Return the index of the first appearing string</li></ul></li><li><p><code>lastIndexOf</code></p><ul><li>Return the index of the last appearing string</li></ul></li><li><p><code>slice()</code></p><ul><li><p>Return the substring</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>const</span> <span class=nx>airline</span> <span class=o>=</span> <span class=s2>&#34;TAP Air Portugal&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>airline</span><span class=p>.</span><span class=nx>slice</span><span class=p>(</span><span class=mi>4</span><span class=p>);</span> <span class=c1>// &lt;Air Portugal&gt;
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>airline</span><span class=p>.</span><span class=nx>slice</span><span class=p>(</span><span class=mi>4</span><span class=p>,</span> <span class=mi>7</span><span class=p>);</span> <span class=c1>// &lt;Air&gt;
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>airline</span><span class=p>.</span><span class=nx>slice</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=nx>airline</span><span class=p>.</span><span class=nx>indexOf</span><span class=p>(</span><span class=s2>&#34; &#34;</span><span class=p>));</span> <span class=c1>// &lt;TAP&gt;
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>airline</span><span class=p>.</span><span class=nx>slice</span><span class=p>(</span><span class=nx>airline</span><span class=p>.</span><span class=nx>lastIndexOf</span><span class=p>(</span><span class=s2>&#34; &#34;</span><span class=p>)</span> <span class=o>+</span> <span class=mi>1</span><span class=p>);</span> <span class=c1>// &lt;Portugal&gt;
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>airline</span><span class=p>.</span><span class=nx>slice</span><span class=p>(</span><span class=o>-</span><span class=mi>2</span><span class=p>);</span> <span class=c1>// &lt;al&gt;
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>airline</span><span class=p>.</span><span class=nx>slice</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=o>-</span><span class=mi>1</span><span class=p>);</span> <span class=c1>// &lt;AP Air Portuga&gt;
</span></span></span></code></pre></div></li></ul></li><li><p><code>toLowerCase</code></p></li><li><p><code>toUpperCase</code></p></li><li><p><code>trim</code></p><ul><li>Removes whitespace from both ends of a string and returns a new string</li></ul></li><li><p><code>replace(pattern, replacement)</code></p><ul><li>Returns a new string with one, some, or all matches of a <code>pattern</code> replaced by a <code>replacement</code></li><li>The <code>pattern</code> can be a string or a <a href=https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp><code>RegExp</code></a>, and the <code>replacement</code> can be a string or a function called for each match</li><li>If <code>pattern</code> is a string, only the first occurrence will be replaced</li></ul></li><li><p><code>replaceAll</code></p></li><li><p><code>includes</code></p></li><li><p><code>startsWith</code></p></li><li><p><code>endsWith</code></p></li><li><p><code>split(pattern)</code></p><ul><li>Takes a pattern and divides a string into an ordered list of substrings by searching for the pattern, puts these substrings into an array, and returns the array</li></ul></li><li><p><code>padStart(targetLength, padString)</code></p><ul><li>Pads the current string with another string (multiple times, if needed) until the resulting string reaches the given length</li><li>The padding is applied from the start of the current string</li></ul></li><li><p><code>padEnd</code></p></li><li><p><code>repeat(count)</code></p><ul><li>Returns a new string which contains the specified number of copies of the string on which it was called, concatenated together</li></ul></li></ul></li></ul><h3 id=copy>Copy<a hidden class=anchor aria-hidden=true href=#copy>#</a></h3><ul><li><p>Reference copy</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>const</span> <span class=nx>newObj</span> <span class=o>=</span> <span class=nx>oldObj</span><span class=p>;</span>
</span></span></code></pre></div></li><li><p>Shallow copy</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>const</span> <span class=nx>newArr</span> <span class=o>=</span> <span class=p>[...</span><span class=nx>oldArr</span><span class=p>];</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>newObj</span> <span class=o>=</span> <span class=p>{</span> <span class=p>...</span><span class=nx>oldObj</span> <span class=p>};</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>newObj</span> <span class=o>=</span> <span class=nb>Object</span><span class=p>.</span><span class=nx>assign</span><span class=p>({},</span> <span class=nx>oldObj</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nx>newArr</span> <span class=o>=</span> <span class=nx>oldArr</span><span class=p>.</span><span class=nx>slice</span><span class=p>();</span>
</span></span></code></pre></div></li><li><p>Deep clone</p><ul><li>Use external libraries like <code>Lodash</code></li></ul></li></ul><hr><h2 id=dom-and-events>DOM and Events<a hidden class=anchor aria-hidden=true href=#dom-and-events>#</a></h2><h3 id=dom>DOM<a hidden class=anchor aria-hidden=true href=#dom>#</a></h3><ul><li><p>Document Object Model</p></li><li><p>Structured representation of HTML documents</p></li><li><p>Allows JavaScript to access HTML elements and styles to manipulate them</p></li><li><p>DOM is automatically created by the browser as soon as the HTML page loads</p></li><li><p>A <strong>tree</strong> structure</p></li><li><p><img loading=lazy src=./imgs/DOM.png alt=DOM></p></li><li><p>DOM is a Web API that written in JavaScript</p></li><li><p><strong>DOM objects are unique</strong></p></li><li><p>*Every single node in the DOM tree is the type <strong><code>Node</code>*</strong></p><ul><li><p>Represented by JavaScript object</p></li><li><p><code>textContent</code>, <code>childNodes</code>, <code>parentNode</code>, <code>cloneNode()</code>, etc</p></li><li><p><code>Node</code> child classes</p><ul><li><p><code>Element</code></p><ul><li><code>HTMLElemnt</code><ul><li><code>HTMLButtonElement</code></li><li>&mldr;</li><li><code>HTMLDivElement</code></li></ul></li></ul></li><li><p><code>Text</code></p></li><li><p><code>Comment</code></p></li><li><p><code>Document</code></p><ul><li>The special object that is the entry node of the DOM</li></ul></li></ul></li><li><p><code>Node</code> inherits <code>EventTarget</code> which has two methods</p><ul><li><code>addEventListener()</code></li><li><code>removeEventListener()</code></li></ul></li><li><p><img loading=lazy src=./imgs/node.png alt=node></p></li></ul></li><li><p>DOM traversal</p><ul><li><p><code>Element.children</code></p><ul><li>Returns a live <code>HTMLCollection</code> which contains all of the child <code>elements</code> of the element upon which it was called</li><li>Includes only element nodes</li></ul></li><li><p><code>Element.childNodes</code></p><ul><li>Returns a live <code>NodeList</code> of child <code>nodes</code> of the given element where the first child node is assigned index <code>0</code></li></ul></li><li><p><code>Element.parentNode</code></p></li><li><p><code>Element.parentElement</code></p><ul><li>Direct parent</li></ul></li><li><p><strong><code>Element.closest(selector)</code></strong></p><ul><li>Traverses the element and its parents (heading toward the document root) until it finds a node that matches the specified selector</li></ul></li><li><p><code>Element.previousElementSibling</code></p></li><li><p><code>Element.nextElementSibling</code></p></li><li><p><code>Element.previousSibling</code></p></li><li><p><code>Element.nextSibling</code></p></li></ul></li></ul><h3 id=operations>Operations<a hidden class=anchor aria-hidden=true href=#operations>#</a></h3><ul><li><p>Select elements</p><ul><li><p><code>document</code></p><ul><li>The <code>Document</code> object represents your web page</li></ul></li><li><p><code>document.documentElement</code></p><ul><li>Returns the <code>Element</code> that is a direct child of the document. For HTML documents, this is normally the <code>HTMLHtmlElement</code> object representing the document&rsquo;s <code>&lt;html></code> element</li></ul></li><li><p><code>document.head</code></p></li><li><p><code>document.body</code></p></li><li><p><code>document.querySelector(selector)</code></p><ul><li>Returns the first <code>Element</code> within the document that matches the specified selector</li><li><code>selector</code><ul><li>A <strong>string</strong> containing one or more selectors to match. This string must be a valid CSS selector string</li></ul></li></ul></li><li><p><code>document.querySelectorAll(selector)</code></p><ul><li>Returns a <code>NodeList</code> of <code>Element</code>s</li></ul></li><li><p><code>document.getElementByID(id)</code></p></li><li><p><code>document.getElementsByTagName(name)</code></p><ul><li>Returns an <code>HTMLCollection</code> of elements with the given tag name</li><li>The returned <code>HTMLCollection</code> is live, meaning that it updates itself automatically to stay in sync with the DOM tree without having to call <code>document.getElementsByTagName()</code> again</li></ul></li><li><p><code>document.getElementsByClassName(className)</code></p><ul><li>Returns an <code>HTMLCollection</code> of elements with the given class name</li></ul></li><li><p><code>Element.querySelector()</code></p></li><li><p><code>Element.getElementsByTagName(name)</code></p></li></ul></li><li><p>Create and insert elements</p><ul><li><p><code>Element.insertAdjacentHTML(position, text)</code></p><ul><li><p>Parses the specified text as HTML or XML and inserts the resulting nodes into the DOM tree at a specified position</p></li><li><p><code>position</code></p><ul><li><p>A string representing the position relative to the element. Must be one of the following strings:</p></li><li><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// &lt;!-- beforebegin --&gt;
</span></span></span><span class=line><span class=cl><span class=c1>// &lt;p&gt;
</span></span></span><span class=line><span class=cl><span class=c1>//   &lt;!-- afterbegin --&gt;
</span></span></span><span class=line><span class=cl><span class=c1>//   foo
</span></span></span><span class=line><span class=cl><span class=c1>//   &lt;!-- beforeend --&gt;
</span></span></span><span class=line><span class=cl><span class=c1>// &lt;/p&gt;
</span></span></span><span class=line><span class=cl><span class=c1>// &lt;!-- afterend --&gt;
</span></span></span></code></pre></div></li></ul></li></ul></li><li><p><code>document.createElement(tagName)</code></p><ul><li>Returns a new created <code>Element</code> specified by <code>tagName</code></li></ul></li><li><p><code>document.createRange().createContextualFragment(markup)</code></p></li><li><p><code>Node.cloneNode(deep)</code></p><ul><li><p>Return a new cloned <code>Node</code>. The cloned node has no parent and is not part of the document, <em>until</em> it is added to another node that is part of the document</p></li><li><p><code>deep</code></p><ul><li>If <code>true</code>, then the node and its whole subtree, including text that may be in child <code>Text</code> nodes, is also copied</li><li>If <code>false</code>, only the node will be cloned. The subtree, including any text that the node contains, is not cloned</li></ul></li></ul></li><li><p><code>Element.prepend(para1, paraN)</code></p><ul><li>Inserts a set of <code>Node</code>objects or string objects before the first child of the <code>Element</code></li><li>String objects are inserted as equivalent <code>Text</code> nodes</li></ul></li><li><p><code>Element.append(para1, paraN)</code></p><ul><li>Inserts a set of <code>Node</code>objects or string objects after the first child of the <code>Element</code></li></ul></li><li><p><code>Element.before(para1, paraN)</code></p><ul><li>Inserts a set of <code>Node</code>objects or string objects in the children list of this <code>Element</code>&rsquo;s parent, just before this <code>Element</code></li></ul></li><li><p><code>Element.after(para1, paraN)</code></p><ul><li>Inserts a set of <code>Node</code>objects or string objects in the children list of this <code>Element</code>&rsquo;s parent, just after this <code>Element</code></li></ul></li></ul></li><li><p>Delete elements</p><ul><li><code>Element.remove()</code><ul><li>Removes the element from the DOM</li></ul></li></ul></li><li><p>Manipulate elements</p><ul><li><p><code>Element.${attribute}</code></p></li><li><p><code>Node.textContent</code></p><ul><li>Represents the text content of the node and its descendants</li><li>Setting <code>textContent</code> on a node removes <em>all</em> of the node&rsquo;s children and replaces them with a single text node with the given string value</li></ul></li><li><p><code>Element.innerHTML</code></p><ul><li>Gets or sets the HTML or XML markup contained within the element</li></ul></li><li><p><code>HTMLInputElement.value</code></p><ul><li>Returns a String</li></ul></li><li><p><code>HTMLElement.focus()</code></p><ul><li>Sets focus on the specified element, if it can be focused. The focused element is the element that will receive keyboard and similar events by default</li></ul></li><li><p><code>HTMLElement.blur()</code></p><ul><li>Removes keyboard focus from the current element</li></ul></li><li><p><code>HTMLElement.style.${property} = ""</code></p><ul><li>Returns the <em>inline</em> style of an element in the form of a <code>CSSStyleDeclaration</code> object</li><li>Will not change the CSS file; add an inline style attribute</li></ul></li><li><p><code>window.getComputedStyle(element)</code></p><ul><li>Returns an object containing the values of all CSS properties of an element, after applying active stylesheets and resolving any basic computation those values may contain</li></ul></li><li><p><code>Element.classList</code></p><ul><li><p>Returns a <strong>live</strong> <a href=https://developer.mozilla.org/en-US/docs/Web/API/DOMTokenList><code>DOMTokenList</code></a> collection of the <code>class</code> attributes of the element</p></li><li><p><code>contains()</code></p></li><li><p><code>add()</code></p></li><li><p><code>remove()</code></p></li><li><p><code>toggle()</code></p><ul><li>Add if not contains, remove if contains</li></ul></li><li><p><strong>Add and remove classes is the main way to manipulate the styles</strong> instead of manipulating <code>style</code> directly</p></li></ul></li><li><p><code>ELement.src</code></p><ul><li>Absolute url</li></ul></li><li><p><code>Element.getAttribute("src")</code></p><ul><li>Relative url</li></ul></li><li><p><code>HTMLElement.dataset.${}</code></p><ul><li>The <strong><code>dataset</code></strong> read-only property of the <code>HTMLElement</code> interface provides read/write access to <a href=https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/data-*>custom data attributes</a> (<code>data-*</code>) on elements. It exposes a map of strings (<a href=https://developer.mozilla.org/en-US/docs/Web/API/DOMStringMap><code>DOMStringMap</code></a>) with an entry for each <code>data-*</code> attribute.</li></ul></li></ul></li><li><p>Coordinates</p><ul><li><p><code>Element.getBoundingClientRect()</code></p></li><li><p><code>window.pageXOffset</code></p></li><li><p><code>window.pageYOffset</code></p></li><li><p><code>window.scrollTo()</code></p><ul><li>Old way</li></ul></li><li><p><code>Element.scrollIntoView(scrollIntoViewOptions)</code></p><ul><li>Modern way</li><li>Scrolls the element&rsquo;s ancestor containers such that the element on which <code>scrollIntoView()</code> is called is visible to the user.</li></ul></li></ul></li><li><p><a href=https://developer.mozilla.org/en-US/docs/Web/API/Intersection_Observer_API>Intersection Observer API</a></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>const</span> <span class=nx>obsCallbackFn</span> <span class=o>=</span> <span class=kd>function</span> <span class=p>(</span><span class=nx>entries</span><span class=p>,</span> <span class=nx>observer</span><span class=p>)</span> <span class=p>{};</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>obsOptions</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>root</span><span class=o>:</span> <span class=kc>null</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>threshold</span><span class=o>:</span> <span class=p>[</span><span class=mi>0</span><span class=p>,</span> <span class=mf>0.2</span><span class=p>],</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>observer</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>IntersectionObserver</span><span class=p>(</span><span class=nx>obsCallbackFn</span><span class=p>,</span> <span class=nx>obsOptions</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nx>observer</span><span class=p>.</span><span class=nx>observe</span><span class=p>(</span><span class=nx>element</span><span class=p>);</span>
</span></span></code></pre></div><ul><li>Sticky nav</li><li>Lazy loaded images</li><li>Infinite scrolling</li></ul></li></ul><h3 id=event-and-event-handlers>Event and event handlers<a hidden class=anchor aria-hidden=true href=#event-and-event-handlers>#</a></h3><ul><li>An event is something happened on the page</li><li><strong>JavaScript will generate an object which contains all the information about the event when an event occurs</strong></li><li>Event handler: the callback function accepts a single parameter: an object based on <a href=https://developer.mozilla.org/en-US/docs/Web/API/Event><code>Event</code></a> describing the event that has occurred, and it returns nothing</li><li><strong>In an event handler function <em>(except arrow function)</em>, <code>this</code> always points to the element on which that handler is attached to</strong></li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=cm>/* para1: type of the event
</span></span></span><span class=line><span class=cl><span class=cm>   para2: event function handler
</span></span></span><span class=line><span class=cl><span class=cm>*/</span>
</span></span><span class=line><span class=cl><span class=nb>document</span><span class=p>.</span><span class=nx>querySelector</span><span class=p>(</span><span class=s2>&#34;.btn&#34;</span><span class=p>).</span><span class=nx>addEventListener</span><span class=p>(</span><span class=s2>&#34;click&#34;</span><span class=p>,</span> <span class=kd>function</span> <span class=p>(</span><span class=nx>e</span><span class=p>)</span> <span class=p>{});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// pass parameters into callback function
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>function</span> <span class=nx>callbackFn</span><span class=p>(</span><span class=nx>e</span><span class=p>,</span> <span class=nx>para</span><span class=p>)</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl><span class=nx>e</span><span class=p>.</span><span class=nx>addEventListener</span><span class=p>(</span><span class=s2>&#34;click&#34;</span><span class=p>,</span> <span class=kd>function</span> <span class=p>(</span><span class=nx>e</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>callbackFn</span><span class=p>(</span><span class=nx>e</span><span class=p>,</span> <span class=nx>para</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// or
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>function</span> <span class=nx>callbackFn</span><span class=p>(</span><span class=nx>e</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=k>this</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=nx>e</span><span class=p>.</span><span class=nx>addEventListener</span><span class=p>(</span><span class=s2>&#34;click&#34;</span><span class=p>,</span> <span class=nx>callbackFn</span><span class=p>.</span><span class=nx>bind</span><span class=p>(</span><span class=nx>para</span><span class=p>));</span>
</span></span></code></pre></div><ul><li>Response with keyboard events</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// keyup, keypress, keydown --- three conditions of interacting with a key on the keyboard
</span></span></span><span class=line><span class=cl><span class=c1>// usually choose keydown, happen as soon as we hit the key
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nb>document</span><span class=p>.</span><span class=nx>addEventListener</span><span class=p>(</span><span class=s2>&#34;keydown&#34;</span><span class=p>,</span> <span class=kd>function</span> <span class=p>(</span><span class=nx>e</span><span class=p>)</span> <span class=p>{});</span>
</span></span><span class=line><span class=cl><span class=c1>// use e.key to get which key is pressed
</span></span></span></code></pre></div><ul><li><code>removeEventListener()</code></li><li><code>e.preventDefault()</code></li><li><code>e.target</code><ul><li>A reference to the object onto which the event was dispatched</li></ul></li><li><code>e.currentTarget</code><ul><li>The current target for the event, as the event traverses the DOM</li></ul></li><li>Event propagation<ul><li>Capturing phase<ul><li>Event happens, travels all the way down from <code>document</code> to the target element</li><li>Pass through every single parent of the target</li></ul></li><li>Target phase<ul><li>Events can be handled right at the target</li></ul></li><li>Bubbling phase<ul><li>Events bubble up from target element to <code>document</code></li><li>Normally <code>addEventListener</code> happens in this phase</li><li><code>addEventListener(event, callbackFn, true)</code> will listen to event in capture phase</li></ul></li><li>Not all events have these phases</li><li>Stop propagation: <code>e.stopPropagation()</code></li></ul></li><li><strong>Event delegation</strong><ul><li>Take advantage of event propagation that add one event listener to the container of similar events instead of add same event listeners to all of them</li><li>Use <code>e.target</code></li><li>Matching strategy</li><li>Guard clause (Guard <code>null</code> pointer)</li></ul></li></ul><h3 id=bom>BOM<a hidden class=anchor aria-hidden=true href=#bom>#</a></h3><ul><li>The <code>window</code> object is supported by all browsers. It represents the browser&rsquo;s window</li><li>All global JavaScript objects, functions, and variables automatically become members of the window object</li><li>Global variables are properties of the window object</li><li>Global functions are methods of the window object</li><li>Even the document object (of the HTML DOM) is a property of the window object</li></ul><hr><h2 id=number-math-date-intl-and-timers>Number, Math, Date, Intl and Timers<a hidden class=anchor aria-hidden=true href=#number-math-date-intl-and-timers>#</a></h2><ul><li><p><code>Number</code></p><ul><li><p>Always float numbers</p></li><li><p>Properties</p><ul><li><code>MAX_SAFE_INTEGER</code></li><li><code>MIN_SAFE_INTEGER</code></li></ul></li><li><p>Methods (Global functions &mdash; <code>Number</code> can be omitted)</p><ul><li><p><code>Number.parseInt(string, radix)</code></p><ul><li><p>parses a string argument and returns an integer of the specified radix</p></li><li><p><code>string</code>: a string <strong>starting with an integer</strong>. Leading whitespace in this argument is ignored</p><p><code>radix</code>: the base in mathematical numeral systems</p></li></ul></li><li><p><code>Number.parseFloat(string, radix)</code></p></li><li><p><code>Number.isNaN(value)</code></p><ul><li>Determines whether the passed value is the number value <a href=https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/NaN><code>NaN</code></a>, and returns <code>false</code> if the input is not of the Number type</li></ul></li><li><p><code>Number.isFinite(value)</code></p><ul><li>Determines whether the passed value is a finite number ‚Äî that is, it checks that a given value is a number, and the number is neither positive <code>Infinity</code>, negative <code>Infinity</code>, nor <code>NaN</code></li><li>Check if <code>value</code> is a number</li></ul></li><li><p><code>Number.isInteger(value)</code></p></li><li><p><code>Number.prototype.toFixed(digits)</code></p><ul><li>Formats a number using fixed-point notation</li></ul></li></ul></li></ul></li><li><p><code>Math</code></p><ul><li><p>Do type coercion itself</p></li><li><p><code>Math.PI</code></p></li><li><p><code>Math.max(val1, val2, valN)</code></p></li><li><p><code>Math.min(val1, val2, valN)</code></p></li><li><p><code>Math.random()</code></p><ul><li>Returns a floating-point, pseudo-random number that&rsquo;s greater than or equal to 0 and less than 1, with approximately uniform distribution over that range ‚Äî which you can then scale to your desired range</li></ul></li><li><p><code>Math.trunc(val)</code></p><ul><li>Returns the integer part of a number by removing any fractional digits</li></ul></li><li><p><code>Math.round(val)</code></p><ul><li>Returns the value of a number rounded to the nearest integer</li></ul></li><li><p><code>Math.ceil(val)</code></p><ul><li>Always rounds up and returns the smaller integer greater than or equal to a given number</li></ul></li><li><p><code>Math.floor(val)</code></p><ul><li><p>Always rounds down and returns the largest integer less than or equal to a given number</p></li><li><p>Create a random integer within <code>[min, max]</code></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>const</span> <span class=nx>randomInt</span> <span class=o>=</span> <span class=p>(</span><span class=nx>min</span><span class=p>,</span> <span class=nx>max</span><span class=p>)</span> <span class=p>=&gt;</span>
</span></span><span class=line><span class=cl>  <span class=nb>Math</span><span class=p>.</span><span class=nx>floor</span><span class=p>(</span><span class=nb>Math</span><span class=p>.</span><span class=nx>random</span><span class=p>()</span> <span class=o>*</span> <span class=p>(</span><span class=nx>max</span> <span class=o>-</span> <span class=nx>min</span><span class=p>)</span> <span class=o>+</span> <span class=mi>1</span><span class=p>)</span> <span class=o>+</span> <span class=nx>min</span><span class=p>;</span>
</span></span></code></pre></div></li></ul></li></ul></li><li><p>Numeric separators</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>const</span> <span class=nx>diameter</span> <span class=o>=</span> <span class=mi>287_460_000_000</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>price</span> <span class=o>=</span> <span class=mi>345_99</span><span class=p>;</span>
</span></span></code></pre></div></li><li><p><code>BigInt</code></p><ul><li>with <code>n</code> suffix: <code>56435468453453453453453454344684868n</code></li><li>Cannot mix <code>BigInt</code> and other types except logical operators and <code>+</code> with String</li><li>Division of <code>BigInt</code>: works like C <code>int</code></li></ul></li><li><p><code>Date</code></p><ul><li><code>new Date()</code><ul><li>Returns a string representing the current time</li></ul></li><li><code>new Date(dateString)</code><ul><li>ISO 8601 format (<code>YYYY-MM-DDTHH:mm:ss.sssZ</code>)</li></ul></li><li><code>new Date(year, monthIndex, day, hours, minutes, seconds, milliseconds)</code><ul><li><code>monthIndex</code> starts with 0</li></ul></li><li><code>new Date(value)</code><ul><li><code>value</code>: an integer value representing the number of milliseconds since <code>January 1, 1970, 00:00:00 UTC</code> (the ECMAScript epoch, equivalent to the UNIX epoch), with leap seconds ignored</li></ul></li><li><code>getFullYear()</code></li><li><code>getMonth()</code></li><li><code>getDate()</code></li><li><code>getDay()</code><ul><li>0 represents Sunday</li></ul></li><li><code>getHours()</code></li><li><code>getMinutes()</code></li><li><code>getSeconds()</code></li><li><code>getTime()</code><ul><li>Returns the number of milliseconds since the <a href=https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date#the_ecmascript_epoch_and_timestamps>epoch</a></li><li>The return value is called <em>timestamp</em></li></ul></li><li><code>set...()</code></li><li><code>toISOString()</code></li><li><code>Date.now()</code><ul><li>Returns the current timestamp</li></ul></li></ul></li><li><p><code>Intl</code></p><ul><li>The namespace for the ECMAScript Internationalization API, which provides language sensitive string comparison, number formatting, and date and time formatting</li><li><code>Intl.DateTimeFormat(locale, options).format(date)</code><ul><li>Formats a date according to the locale and formatting options</li><li><a href=https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl/DateTimeFormat/DateTimeFormat><code>options</code></a></li></ul></li><li><code>Intl.NumberFormat(locale, options).format(num)</code><ul><li>Formats a number</li></ul></li></ul></li><li><p>Timers</p><ul><li><p><code>setTimeout(callbackFn, dalay, param1, param2, paramn)</code></p><ul><li>Sets a timer which executes a function or specified piece of code once the timer expires</li><li>Returns an timeout ID which uniquely identifies the timeout</li><li><code>delay</code>: in milliseconds</li><li><code>param</code>: additional arguments which are passed through to the function specified by <code>functionRef</code></li><li><code>setTimeout()</code> is an <strong>asynchronous function</strong>, meaning that the timer function will not pause execution of other functions in the functions stack</li></ul></li><li><p><code>clearTimeout(timeoutID)</code></p><ul><li>cancels a timeout previously established by calling <code>setTimeout()</code></li><li>If the parameter provided does not identify a previously established action, this method does nothing</li></ul></li><li><p><code>setInterval(callbackFn, delay, params)</code></p><ul><li><p>Returns an interval ID which uniquely identifies the interval</p></li><li><p>Repeatedly calls a function or executes a code snippet, with a fixed time delay between each call</p></li><li><p><code>callbackFn</code> is not called immediately, actually get called after one second</p><ul><li><p>Solution:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=nx>callbackFn</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>timer</span> <span class=o>=</span> <span class=nx>setInterval</span><span class=p>(</span><span class=nx>callbackFn</span><span class=p>,</span> <span class=nx>delay</span><span class=p>);</span>
</span></span></code></pre></div></li></ul></li></ul></li><li><p><code>clearInterval(intervalID)</code></p></li></ul></li></ul><hr><h2 id=oop-in-javascript>OOP In JavaScript<a hidden class=anchor aria-hidden=true href=#oop-in-javascript>#</a></h2><ul><li>Prototype and Object<ul><li>In terms of Class and Instance (but not the same)<ul><li>JavaScript doesn&rsquo;t have Class</li></ul></li><li>Objects are linked to a prototype object</li><li>Prototypal inheritance/delegation: the prototype contains methods that are accessible to all objects linked to that prototype</li></ul></li><li>Three ways of implementing OOP in JavaScript<ul><li>Constructor functions<ul><li>Technique to create objects from a function</li><li>This is how built-in objects like Arrays, Maps or Sets are actually implemented</li></ul></li><li>ES6 Classes<ul><li>Modern alternative to constructor function syntax</li><li>&ldquo;Syntactic sugar&rdquo;: works like constructor functions behind the scenes</li><li>Do NOT behave like classical OOP</li></ul></li><li><code>Object.create()</code></li></ul></li><li><code>instanceof</code> operator</li></ul><h3 id=constructor-function>Constructor function<a hidden class=anchor aria-hidden=true href=#constructor-function>#</a></h3><ul><li><p>Syntax</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>const</span> <span class=nx>ClassName</span> <span class=o>=</span> <span class=kd>function</span> <span class=p>(</span><span class=nx>field1</span><span class=p>,</span> <span class=nx>field2</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>this</span><span class=p>.</span><span class=nx>field1</span> <span class=o>=</span> <span class=nx>field1</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>this</span><span class=p>.</span><span class=nx>field2</span> <span class=o>=</span> <span class=nx>field2</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl><span class=nx>ClassName</span><span class=p>.</span><span class=nx>prototype</span><span class=p>.</span><span class=nx>method1</span> <span class=o>=</span> <span class=kd>function</span> <span class=p>()</span> <span class=p>{};</span>
</span></span><span class=line><span class=cl><span class=nx>ClassName</span><span class=p>.</span><span class=nx>prototype</span><span class=p>.</span><span class=nx>method2</span> <span class=o>=</span> <span class=kd>function</span> <span class=p>()</span> <span class=p>{};</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>obj</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>ClassName</span><span class=p>(</span><span class=nx>para1</span><span class=p>,</span> <span class=nx>para2</span><span class=p>);</span>
</span></span></code></pre></div></li><li><p>Works done behind <code>new</code></p><ol><li>An empty object is created</li><li>The function is called, <code>this</code> is linked to the empty object</li><li>The empty object is linked to prototype</li><li>Return the newly created object automatically</li></ol></li><li><p>Never declare methods in constructor functions</p></li><li><p>Every object in JavaScript automatically has a property <code>prototype</code></p></li><li><p><strong><em>Every object that is created by a certain constructor function will get access to all the methods and properties that we define on the constructors prototype property</em></strong></p></li><li><p><code>ClassName.prototype</code> is an object which is the prototype of the <code>obj</code></p><ul><li><code>obj.__proto__ === ClassName.prototype</code></li><li><code>ClassName.prototype.isPrototypeOf(obj) === true</code></li><li><code>ClassName.prototype.isPrototypeOf(ClassName) === false</code></li><li><code>ClassName.prototype.constructor === ClassName</code></li></ul></li><li><p>Prototype chain</p><p><img loading=lazy src=./imgs/prototype_chain.jpg alt=prototype_chain></p><ul><li><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// the Behavior of the top prototype chain
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nb>Object</span><span class=p>.</span><span class=nx>__proto__</span> <span class=o>===</span> <span class=nb>Function</span><span class=p>.</span><span class=nx>prototype</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=nb>Function</span><span class=p>.</span><span class=nx>__proto__</span> <span class=o>===</span> <span class=nb>Function</span><span class=p>.</span><span class=nx>prototype</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=nb>Function</span><span class=p>.</span><span class=nx>prototype</span><span class=p>.</span><span class=nx>prototype</span> <span class=o>===</span> <span class=kc>undefined</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=nb>Object</span><span class=p>.</span><span class=nx>__proto__</span><span class=p>.</span><span class=nx>__proto__</span> <span class=o>===</span> <span class=nb>Object</span><span class=p>.</span><span class=nx>prototype</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=nb>Object</span><span class=p>.</span><span class=nx>__proto__</span><span class=p>.</span><span class=nx>__proto__</span><span class=p>.</span><span class=nx>__proto__</span> <span class=o>===</span> <span class=kc>null</span><span class=p>;</span>
</span></span></code></pre></div><blockquote><p><a href=https://stackoverflow.com/questions/40920909/what-is-in-object-proto>A good explanation of this messy behavior</a></p></blockquote></li></ul></li><li><p>Static methods</p><ul><li><p>Methods attached to the constructor function instead of its prototype</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=nx>ClassName</span><span class=p>.</span><span class=nx>helper</span> <span class=o>=</span> <span class=kd>function</span> <span class=p>()</span> <span class=p>{};</span>
</span></span></code></pre></div></li></ul></li></ul><h3 id=es6-classes>ES6 Classes<a hidden class=anchor aria-hidden=true href=#es6-classes>#</a></h3><ul><li><p>Not the actual <code>Class</code>, just another way of using constructor functions</p></li><li><p>Syntax</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>class</span> <span class=nx>ClassName</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>constructor</span><span class=p>(</span><span class=nx>field1</span><span class=p>,</span> <span class=nx>field2</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=p>.</span><span class=nx>field1</span> <span class=o>=</span> <span class=nx>field1</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=p>.</span><span class=nx>field2</span> <span class=o>=</span> <span class=nx>field2</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>method1</span><span class=p>()</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>  <span class=nx>method2</span><span class=p>()</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>  <span class=kr>static</span> <span class=nx>helper</span><span class=p>()</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div></li><li><p>Getter and setter</p><ul><li>Existed to make code more clear</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>class</span> <span class=nx>Person</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>constructor</span><span class=p>(</span><span class=nx>birthYear</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=p>.</span><span class=nx>birthYear</span> <span class=o>=</span> <span class=nx>birthYear</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=c1>// getter
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>get</span> <span class=nx>birth</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=k>this</span><span class=p>.</span><span class=nx>birthYear</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=c1>// setter
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>set</span> <span class=nx>birth</span><span class=p>(</span><span class=nx>birth</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=p>.</span><span class=nx>birthYear</span> <span class=o>=</span> <span class=nx>birth</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>sam</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Person</span><span class=p>(</span><span class=mi>2000</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>sam</span><span class=p>.</span><span class=nx>birth</span><span class=p>);</span> <span class=c1>// not sam.birth()
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>sam</span><span class=p>.</span><span class=nx>birth</span> <span class=o>=</span> <span class=mi>30</span><span class=p>;</span> <span class=c1>// will change the birthYear
</span></span></span></code></pre></div></li></ul><h3 id=objectcreate><code>Object.create</code><a hidden class=anchor aria-hidden=true href=#objectcreate>#</a></h3><ul><li><p>Syntax</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>const</span> <span class=nx>ClassName</span><span class=p>()</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>obj</span> <span class=o>=</span> <span class=nb>Object</span><span class=p>.</span><span class=nx>create</span><span class=p>(</span><span class=nx>ClassName</span><span class=p>);</span>
</span></span></code></pre></div></li><li><p>Be aware of the difference: <strong>NOT</strong> &ldquo;fake class&rdquo;</p></li></ul><h3 id=inheritance>Inheritance<a hidden class=anchor aria-hidden=true href=#inheritance>#</a></h3><ul><li><p>Constructor function</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>const</span> <span class=nx>Person</span> <span class=o>=</span> <span class=kd>function</span> <span class=p>(</span><span class=nx>firstName</span><span class=p>,</span> <span class=nx>birthYear</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>this</span><span class=p>.</span><span class=nx>firstName</span> <span class=o>=</span> <span class=nx>firstName</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>this</span><span class=p>.</span><span class=nx>birthYear</span> <span class=o>=</span> <span class=nx>birthYear</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl><span class=nx>Person</span><span class=p>.</span><span class=nx>prototype</span><span class=p>.</span><span class=nx>calcAge</span> <span class=o>=</span> <span class=kd>function</span> <span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=mi>2037</span> <span class=o>-</span> <span class=k>this</span><span class=p>.</span><span class=nx>birthYear</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>Student</span> <span class=o>=</span> <span class=kd>function</span> <span class=p>(</span><span class=nx>firstName</span><span class=p>,</span> <span class=nx>birthYear</span><span class=p>,</span> <span class=nx>course</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>Person</span><span class=p>.</span><span class=nx>call</span><span class=p>(</span><span class=k>this</span><span class=p>,</span> <span class=nx>firstName</span><span class=p>,</span> <span class=nx>birthYear</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=k>this</span><span class=p>.</span><span class=nx>course</span> <span class=o>=</span> <span class=nx>course</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl><span class=c1>// Linking prototypes
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>Student</span><span class=p>.</span><span class=nx>prototype</span> <span class=o>=</span> <span class=nb>Object</span><span class=p>.</span><span class=nx>create</span><span class=p>(</span><span class=nx>Person</span><span class=p>.</span><span class=nx>prototype</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nx>Student</span><span class=p>.</span><span class=nx>prototype</span><span class=p>.</span><span class=nx>constructor</span> <span class=o>=</span> <span class=nx>Student</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=nx>Student</span><span class=p>.</span><span class=nx>prototype</span><span class=p>.</span><span class=nx>introduce</span> <span class=o>=</span> <span class=kd>function</span> <span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`My name is </span><span class=si>${</span><span class=k>this</span><span class=p>.</span><span class=nx>firstName</span><span class=si>}</span><span class=sb> and I study </span><span class=si>${</span><span class=k>this</span><span class=p>.</span><span class=nx>course</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span></code></pre></div></li><li><p>ES6 Classes</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>class</span> <span class=nx>PersonCl</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>constructor</span><span class=p>(</span><span class=nx>fullName</span><span class=p>,</span> <span class=nx>birthYear</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=p>.</span><span class=nx>fullName</span> <span class=o>=</span> <span class=nx>fullName</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=p>.</span><span class=nx>birthYear</span> <span class=o>=</span> <span class=nx>birthYear</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=c1>// Instance methods
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>calcAge</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=mi>2037</span> <span class=o>-</span> <span class=k>this</span><span class=p>.</span><span class=nx>birthYear</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=nx>greet</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`Hey </span><span class=si>${</span><span class=k>this</span><span class=p>.</span><span class=nx>fullName</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=c1>// Static method
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=kr>static</span> <span class=nx>hey</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s2>&#34;Hey there üëã&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=kr>class</span> <span class=nx>StudentCl</span> <span class=kr>extends</span> <span class=nx>PersonCl</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>constructor</span><span class=p>(</span><span class=nx>fullName</span><span class=p>,</span> <span class=nx>birthYear</span><span class=p>,</span> <span class=nx>course</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// Always needs to happen first!
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kr>super</span><span class=p>(</span><span class=nx>fullName</span><span class=p>,</span> <span class=nx>birthYear</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=p>.</span><span class=nx>course</span> <span class=o>=</span> <span class=nx>course</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=nx>introduce</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`My name is </span><span class=si>${</span><span class=k>this</span><span class=p>.</span><span class=nx>fullName</span><span class=si>}</span><span class=sb> and I study </span><span class=si>${</span><span class=k>this</span><span class=p>.</span><span class=nx>course</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=nx>greet</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s2>&#34;Hi&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div></li></ul><h3 id=encapsulation>Encapsulation<a hidden class=anchor aria-hidden=true href=#encapsulation>#</a></h3><ul><li><p>JavaScript doesn&rsquo;t have real <code>private</code></p></li><li><p>Protected fields and methods</p><ul><li>Just add a <code>_</code> before the name to indicate it is protected</li><li>Faked encapsulation</li></ul></li><li><p>Private Class fields and methods</p><ul><li><p>Truly encapsulation</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>class</span> <span class=nx>Account</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=c1>// 1) Public fields (instances)
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>locale</span> <span class=o>=</span> <span class=nx>navigator</span><span class=p>.</span><span class=nx>language</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=c1>// 2) Private fields (instances)
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=err>#</span><span class=nx>movements</span> <span class=o>=</span> <span class=p>[];</span>
</span></span><span class=line><span class=cl>  <span class=err>#</span><span class=nx>pin</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=nx>constructor</span><span class=p>(</span><span class=nx>owner</span><span class=p>,</span> <span class=nx>currency</span><span class=p>,</span> <span class=nx>pin</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=p>.</span><span class=nx>owner</span> <span class=o>=</span> <span class=nx>owner</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=p>.</span><span class=nx>currency</span> <span class=o>=</span> <span class=nx>currency</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=p>.</span><span class=err>#</span><span class=nx>pin</span> <span class=o>=</span> <span class=nx>pin</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`Thanks for opening an account, </span><span class=si>${</span><span class=nx>owner</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=c1>// 3) Public methods
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=c1>// Public interface
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>getMovements</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=k>this</span><span class=p>.</span><span class=err>#</span><span class=nx>movements</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=nx>deposit</span><span class=p>(</span><span class=nx>val</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=p>.</span><span class=err>#</span><span class=nx>movements</span><span class=p>.</span><span class=nx>push</span><span class=p>(</span><span class=nx>val</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=k>this</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=nx>withdraw</span><span class=p>(</span><span class=nx>val</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=p>.</span><span class=nx>deposit</span><span class=p>(</span><span class=o>-</span><span class=nx>val</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=k>this</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=nx>requestLoan</span><span class=p>(</span><span class=nx>val</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=err>#</span><span class=nx>approveLoan</span><span class=p>(</span><span class=nx>val</span><span class=p>))</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=k>this</span><span class=p>.</span><span class=nx>deposit</span><span class=p>(</span><span class=nx>val</span><span class=p>);</span>
</span></span><span class=line><span class=cl>      <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`Loan approved`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>      <span class=k>return</span> <span class=k>this</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=kr>static</span> <span class=nx>helper</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s2>&#34;Helper&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=c1>// 4) Private methods
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=err>#</span><span class=nx>approveLoan</span><span class=p>(</span><span class=nx>val</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=kc>true</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div></li></ul></li></ul><hr><h2 id=asynchronous-javascript>Asynchronous JavaScript<a hidden class=anchor aria-hidden=true href=#asynchronous-javascript>#</a></h2><ul><li>Synchronous code is executed line by line</li><li>Long-running operations block code execution</li><li>Asynchronous code is executed after a task that runs in the background finishes</li><li>Asynchronous code is non-blocking</li></ul><h3 id=ajax>AJAX<a hidden class=anchor aria-hidden=true href=#ajax>#</a></h3><ul><li><p>Asynchronous JavaScript And XML</p></li><li><p>Allow us to communicate with remote web servers in an asynchronous way</p></li><li><p>With AJAX calls, we can request data from web server dynamically</p></li><li><p>XML data format is not used anymore</p></li><li><p>JSON is the most popular data format now</p></li><li><p>Old way</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>const</span> <span class=nx>request</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>XMLHttpRequest</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=nx>request</span><span class=p>.</span><span class=nx>open</span><span class=p>(</span><span class=s2>&#34;GET&#34;</span><span class=p>,</span> <span class=nx>$</span><span class=p>{</span><span class=nx>url</span><span class=p>});</span>
</span></span><span class=line><span class=cl><span class=nx>request</span><span class=p>.</span><span class=nx>send</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=nx>request</span><span class=p>.</span><span class=nx>addEventListener</span><span class=p>(</span><span class=s2>&#34;load&#34;</span><span class=p>,</span> <span class=kd>function</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=p>[</span><span class=nx>data</span><span class=p>]</span> <span class=o>=</span> <span class=nx>JSON</span><span class=p>.</span><span class=nx>parse</span><span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=nx>responseText</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>...</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span></code></pre></div></li><li><p><strong>Call back hell</strong></p><ul><li>The problem of nested callback functions for executing asynchronous operations <strong>in order</strong></li></ul></li><li><p>Modern way</p><ul><li><p><code>Fetch</code> API</p><ul><li><code>fetch(url)</code><ul><li>Starts the process of fetching a resource from the network, returning a <strong>promise</strong> which is fulfilled once the response is available</li><li>Only rejects <strong>when a network error is encountered</strong></li></ul></li><li><code>Promise.prototype.then(resolve, reject)</code><ul><li>It immediately returns an equivalent <code>Promise</code> object, allowing you to chain calls to other promise methods</li><li><code>resolve(value)</code><ul><li>Its return value becomes the fulfillment value of the promise returned by <code>then()</code></li><li>The function is called with the following arguments <code>value</code>: The value that the promise was fulfilled with</li><li>If it is not a function, it is internally replaced with an <em>identity</em> function (<code>(x) => x</code>) which simply passes the fulfillment value forward</li></ul></li><li><code>reject(error)</code><ul><li>Its return value becomes the fulfillment value of the promise returned by <code>catch()</code></li><li>The function is called with the following arguments <code>error</code>: The <code>error</code> object that the promise was rejected with</li><li>If it is not a function, it is internally replaced with a <em>thrower</em> function (<code>(x) => { throw x; }</code>) which throws the rejection reason it received</li></ul></li></ul></li><li><code>Promise.prototype.catch()</code><ul><li>It is a shortcut for <code>Promise.prototype.then(undefined, reject)</code></li></ul></li><li><code>Promise.prototype.finally(final)</code></li><li>Promise is consumed and new promise is built and settled during <code>then()</code>, therefore asynchronous operations are executed <strong>in order</strong></li><li>Actually it is still nested, but it is coded in a non-nested way</li><li><code>then()</code> is actually a new promisification (build -> callback -> settled)</li></ul></li><li><p>Example</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>const</span> <span class=nx>getJSON</span> <span class=o>=</span> <span class=kd>function</span> <span class=p>(</span><span class=nx>url</span><span class=p>,</span> <span class=nx>errorMsg</span> <span class=o>=</span> <span class=s2>&#34;Something went wrong&#34;</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=nx>fetch</span><span class=p>(</span><span class=nx>url</span><span class=p>).</span><span class=nx>then</span><span class=p>(</span><span class=nx>response</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=nx>response</span><span class=p>.</span><span class=nx>ok</span><span class=p>)</span> <span class=k>throw</span> <span class=k>new</span> <span class=nb>Error</span><span class=p>(</span><span class=sb>`</span><span class=si>${</span><span class=nx>errorMsg</span><span class=si>}</span><span class=sb> (</span><span class=si>${</span><span class=nx>response</span><span class=p>.</span><span class=nx>status</span><span class=si>}</span><span class=sb>)`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>response</span><span class=p>.</span><span class=nx>json</span><span class=p>();</span> <span class=c1>// create a new promise
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>getCountryData</span> <span class=o>=</span> <span class=kd>function</span> <span class=p>(</span><span class=nx>country</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=c1>// Country 1
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>getJSON</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=sb>`https://restcountries.eu/rest/v2/name/</span><span class=si>${</span><span class=nx>country</span><span class=si>}</span><span class=sb>`</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;Country not found&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>.</span><span class=nx>then</span><span class=p>(</span><span class=nx>data</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>renderCountry</span><span class=p>(</span><span class=nx>data</span><span class=p>[</span><span class=mi>0</span><span class=p>]);</span>
</span></span><span class=line><span class=cl>      <span class=kr>const</span> <span class=nx>neighbour</span> <span class=o>=</span> <span class=nx>data</span><span class=p>[</span><span class=mi>0</span><span class=p>].</span><span class=nx>borders</span><span class=p>[</span><span class=mi>0</span><span class=p>];</span>
</span></span><span class=line><span class=cl>      <span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=nx>neighbour</span><span class=p>)</span> <span class=k>throw</span> <span class=k>new</span> <span class=nb>Error</span><span class=p>(</span><span class=s2>&#34;No neighbour found!&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>      <span class=c1>// Country 2
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=k>return</span> <span class=nx>getJSON</span><span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=sb>`https://restcountries.eu/rest/v2/alpha/</span><span class=si>${</span><span class=nx>neighbour</span><span class=si>}</span><span class=sb>`</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;Country not found&#34;</span>
</span></span><span class=line><span class=cl>      <span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>})</span>
</span></span><span class=line><span class=cl>    <span class=p>.</span><span class=nx>then</span><span class=p>(</span><span class=nx>data</span> <span class=p>=&gt;</span> <span class=nx>renderCountry</span><span class=p>(</span><span class=nx>data</span><span class=p>))</span>
</span></span><span class=line><span class=cl>    <span class=p>.</span><span class=k>catch</span><span class=p>(</span><span class=nx>err</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=sb>`</span><span class=si>${</span><span class=nx>err</span><span class=si>}</span><span class=sb> üí•üí•üí•`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>      <span class=nx>renderError</span><span class=p>(</span><span class=sb>`Something went wrong üí•üí• </span><span class=si>${</span><span class=nx>err</span><span class=p>.</span><span class=nx>message</span><span class=si>}</span><span class=sb>. Try again!`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span></code></pre></div></li></ul></li></ul><h3 id=promises>Promises<a hidden class=anchor aria-hidden=true href=#promises>#</a></h3><ul><li><p>An <strong>object</strong> that is used as a placeholder for the future result of an asynchronous operation</p></li><li><p>We no longer need to rely on events and callbacks passed into asynchronous functions to handle asynchronous results</p></li><li><p>Instead of nesting callbacks, we can chain promises for a sequence of asynchronous operations</p></li><li><p>A Promise is a JavaScript object that links producing code and consuming code</p></li><li><p>Lifecycle</p><ul><li><p>Build promises</p><ul><li><p><code>Promise(function(resolve, reject) {})</code></p><ul><li>It is primarily used to wrap callback-based APIs (the <code>executor</code>) that do not already support promises</li></ul></li><li><p><code>Promise.resolve(value)</code></p><ul><li>Returns a <code>Promise</code> object that is fulfilled with a given <code>value</code></li></ul></li><li><p><code>Promise.reject(error)</code></p><ul><li>Returns a <code>Promise</code> object that is rejected with a given <code>error</code></li></ul></li><li><p>Promisify callback functions</p><ul><li>So that we can chain all promises (<strong>callbacks converted to promise workflow</strong>)</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// The para is the executor
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>wait</span> <span class=o>=</span> <span class=nx>seconds</span> <span class=p>=&gt;</span>
</span></span><span class=line><span class=cl>  <span class=k>new</span> <span class=nb>Promise</span><span class=p>(</span><span class=kd>function</span> <span class=p>(</span><span class=nx>resolve</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>setTimeout</span><span class=p>(</span><span class=nx>resolve</span><span class=p>,</span> <span class=nx>seconds</span> <span class=o>*</span> <span class=mi>1000</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=nx>wait</span><span class=p>(</span><span class=mi>2</span><span class=p>).</span><span class=nx>then</span><span class=p>(</span><span class=kd>function</span> <span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s2>&#34;I have waited for 2 seconds&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span></code></pre></div></li></ul></li><li><p><img loading=lazy src=./imgs%5cpromises.png alt=promises></p></li><li><p>Pending</p><ul><li>Execute the executor (equivalent to callback execution)</li></ul></li><li><p>Settled</p><ul><li><p>Asynchronous tasks are finished</p></li><li><p>Fulfilled or Rejected</p></li><li><table><thead><tr><th style=text-align:left>myPromise.state</th><th style=text-align:left>myPromise.result</th></tr></thead><tbody><tr><td style=text-align:left>&ldquo;pending&rdquo;</td><td style=text-align:left><code>undefined</code></td></tr><tr><td style=text-align:left>&ldquo;fulfilled&rdquo;</td><td style=text-align:left>a result value</td></tr><tr><td style=text-align:left>&ldquo;rejected&rdquo;</td><td style=text-align:left>an error object</td></tr></tbody></table></li></ul></li><li><p>Consume promises</p><ul><li><p>Consuming promises is actually executing functions</p></li><li><p><code>then()</code>, <code>catch()</code>, <code>finally()</code></p></li><li><p><code>async</code> and <code>await</code></p><ul><li><em><code>async </code>and <code>await</code> make promises easier to write</em><ul><li>No more <code>then</code></li><li><strong>Asynchronous operation written in synchronous way</strong></li></ul></li><li>The keyword <code>async</code> before a function makes the function return a <strong>promise</strong> (<strong>always fulfilled not rejected</strong>)</li><li>All functions invoked in <code>async</code> functions should be <code>async</code> not callback functions</li><li>The <code>await</code> keyword can only be used inside an <code>async</code> function</li><li>The <code>await</code> keyword makes the function pause the execution and wait for a resolved promise before it continues</li><li><code>await</code> returns <strong>the fulfillment value of the promise</strong> or <code>thenable</code>object, or, if the expression is not <code>thenable</code>, the expression&rsquo;s own value</li><li>Use with error handling <code>try...catch</code><ul><li>Rethrow the <code>error</code> in <code>catch</code> block will manually reject <code>async</code> function</li></ul></li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// Promisify geolocation
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>getPosition</span> <span class=o>=</span> <span class=kd>function</span> <span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=k>new</span> <span class=nb>Promise</span><span class=p>(</span><span class=kd>function</span> <span class=p>(</span><span class=nx>resolve</span><span class=p>,</span> <span class=nx>reject</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>navigator</span><span class=p>.</span><span class=nx>geolocation</span><span class=p>.</span><span class=nx>getCurrentPosition</span><span class=p>(</span><span class=nx>resolve</span><span class=p>,</span> <span class=nx>reject</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>whereAmI</span> <span class=o>=</span> <span class=kr>async</span> <span class=kd>function</span> <span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>try</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// Geolocation
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kr>const</span> <span class=nx>pos</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>getPosition</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=p>{</span> <span class=nx>latitude</span><span class=o>:</span> <span class=nx>lat</span><span class=p>,</span> <span class=nx>longitude</span><span class=o>:</span> <span class=nx>lng</span> <span class=p>}</span> <span class=o>=</span> <span class=nx>pos</span><span class=p>.</span><span class=nx>coords</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=c1>// Reverse geocoding
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kr>const</span> <span class=nx>resGeo</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>fetch</span><span class=p>(</span>
</span></span><span class=line><span class=cl>      <span class=sb>`https://geocode.xyz/</span><span class=si>${</span><span class=nx>lat</span><span class=si>}</span><span class=sb>,</span><span class=si>${</span><span class=nx>lng</span><span class=si>}</span><span class=sb>?geoit=json`</span>
</span></span><span class=line><span class=cl>    <span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=nx>resGeo</span><span class=p>.</span><span class=nx>ok</span><span class=p>)</span> <span class=k>throw</span> <span class=k>new</span> <span class=nb>Error</span><span class=p>(</span><span class=s2>&#34;Problem getting location data&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>dataGeo</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>resGeo</span><span class=p>.</span><span class=nx>json</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=sb>`You are in </span><span class=si>${</span><span class=nx>dataGeo</span><span class=p>.</span><span class=nx>city</span><span class=si>}</span><span class=sb>, </span><span class=si>${</span><span class=nx>dataGeo</span><span class=p>.</span><span class=nx>country</span><span class=si>}</span><span class=sb>`</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span> <span class=k>catch</span> <span class=p>(</span><span class=nx>err</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// Reject promise returned from async function
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>throw</span> <span class=nx>err</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s2>&#34;1: Will get location&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=c1>// const city = whereAmI();
</span></span></span><span class=line><span class=cl><span class=c1>// console.log(city);
</span></span></span><span class=line><span class=cl><span class=c1>// whereAmI()
</span></span></span><span class=line><span class=cl><span class=c1>//   .then(city =&gt; console.log(`2: ${city}`))
</span></span></span><span class=line><span class=cl><span class=c1>//   .catch(err =&gt; console.error(`2: ${err.message} üí•`))
</span></span></span><span class=line><span class=cl><span class=c1>//   .finally(() =&gt; console.log(&#39;3: Finished getting location&#39;));
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=c1>// More async way
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>(</span><span class=kr>async</span> <span class=kd>function</span> <span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>try</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>city</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>whereAmI</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`2: </span><span class=si>${</span><span class=nx>city</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span> <span class=k>catch</span> <span class=p>(</span><span class=nx>err</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=sb>`2: </span><span class=si>${</span><span class=nx>err</span><span class=p>.</span><span class=nx>message</span><span class=si>}</span><span class=sb> üí•`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s2>&#34;3: Finished getting location&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>})();</span>
</span></span></code></pre></div></li></ul></li></ul></li><li><p><code>Promise.all()</code></p><ul><li>Used for running Promises in parallel</li><li>Takes an iterable of promises as input and returns a single <code>Promise</code></li><li>This returned promise fulfills when all of the input&rsquo;s promises <strong>fulfill</strong> (including when an empty iterable is passed), with an array of the fulfillment values</li><li>It rejects when any of the input&rsquo;s promises rejects, with this first rejection reason</li></ul></li><li><p><code>Promise.race()</code></p><ul><li>Takes an iterable of promises as input and returns a single <code>Promise</code></li><li>This returned promise settles with the eventual state of the first promise that settles</li><li>Usually use with a timer</li></ul></li><li><p><code>Promise.allSettled()</code></p><ul><li>Takes an iterable of promises as input and returns a single <code>Promise</code></li><li>This returned promise fulfills when all of the input&rsquo;s promises <strong>settle</strong> (including when an empty iterable is passed), with an array of objects that describe the outcome of each promise</li></ul></li><li><p><code>Promise.any()</code></p><ul><li>Takes an iterable of promises as input and returns a single <code>Promise</code></li><li>This returned promise fulfills when any of the input&rsquo;s promises fulfills, with this first fulfillment value</li><li>It rejects when all of the input&rsquo;s promises reject (including when an empty iterable is passed), with an <a href=https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/AggregateError><code>AggregateError</code></a> containing an array of rejection reasons</li></ul></li></ul><h3 id=the-event-loop>The Event Loop<a hidden class=anchor aria-hidden=true href=#the-event-loop>#</a></h3><ul><li>JavaScript only has one thread of execution</li><li>Web APIs environment (building / pending) -> Callback queue or Microtasks queue (settled) -> Call stack (consuming)<ul><li>Callback functions go into the callback queue</li><li>Promises go into the microtasks queue<ul><li>Microtasks queue has priority over callback queue</li></ul></li></ul></li><li>Event loop check if call stack has no execution and then pick a callback function from the callback queue to the call stack</li></ul><hr><h2 id=web-apis>Web APIs<a hidden class=anchor aria-hidden=true href=#web-apis>#</a></h2><ul><li>Browser APIs<ul><li>All browsers have a set of built-in Web APIs to support complex operations, and to help accessing data</li><li>DOM</li><li><code>Fetch</code> API</li><li><a href=https://www.w3schools.com/js/js_api_geolocation.asp><code>Geoloaction</code> API</a></li><li><a href=https://www.w3schools.com/js/js_api_web_storage.asp><code>Strorage</code> API</a></li></ul></li><li>Server APIS (Third party APIs)</li></ul><hr><h2 id=modules>Modules<a hidden class=anchor aria-hidden=true href=#modules>#</a></h2><ul><li><p>Module</p><ul><li><p>Reusable piece of code that encapsulate implementation details</p></li><li><p>Usually a standalone file, but it doesn&rsquo;t have to be</p></li><li><div class=highlight><pre tabindex=0 class=chroma><code class=language-markdown data-lang=markdown><span class=line><span class=cl>import { ${} } from ${}; // Dependency
</span></span><span class=line><span class=cl>// module code
</span></span><span class=line><span class=cl>export { ${} }; // Public API
</span></span></code></pre></div></li></ul></li><li><p>ES6 module</p><ul><li><p>Modules stored in files, exactly one module per file</p></li><li><table><thead><tr><th></th><th>ES6 module</th><th>Script</th></tr></thead><tbody><tr><td>Top-level variables</td><td>Scoped to module</td><td>Global</td></tr><tr><td>Default mode</td><td>Strict mode</td><td>&ldquo;Sloppy&rdquo; mode</td></tr><tr><td>Top-level <code>this</code></td><td><code>undefined</code></td><td><code>window</code></td></tr><tr><td>Imports and exports</td><td>Yes</td><td>No</td></tr><tr><td>HTML</td><td><code>&lt;script type="module"></code></td><td><code>&lt;script></code></td></tr><tr><td>File downloading</td><td>Asynchronous</td><td>Synchronous by default</td></tr></tbody></table></li><li><p>Modules are imported synchronously</p></li><li><p>This make bundling and dead code elimination possible</p></li><li><p>Imports and exports are live connection, not copies</p></li><li><p>Two types of export</p><ul><li>Named export<ul><li>In-line</li><li>All at bottom</li></ul></li><li>Default export</li></ul></li><li><p>Top-level <code>await</code> (ES2022)</p><ul><li>Only works in modules</li><li>Use <code>await</code> without <code>async</code></li><li>Will block the execution on call stack, and importing and exporting</li><li>Useful for calling <code>async</code> functions and consuming it instead of <code>func().then()</code></li></ul></li></ul></li><li><p>CommonJS module</p><ul><li>The module system in <code>Node.js</code></li></ul></li><li><p>Development -> Modules -> Bundling -> Transpiling / Polyfilling -> Production</p></li><li><p>Build Process</p><ul><li>Bundling<ul><li>Join all modules into one file</li></ul></li><li>Polyfilling<ul><li>Convert modern JavaScript back to ES5</li><li>Usually done by Babel</li><li><code>import "core-js/stable"</code></li><li><code>import "regenerator-runtime/runtime"</code></li></ul></li><li>Using tools like webpack or PARCEL</li></ul></li></ul><hr><h2 id=software-architecture>Software architecture<a hidden class=anchor aria-hidden=true href=#software-architecture>#</a></h2><ul><li>Web application components<ul><li>State and database</li><li>HTTP libaray<ul><li>For AJAX</li><li>Optional but almost always necessary in real-world apps</li></ul></li><li>Business Logic<ul><li>Code that solves the actual business problem</li></ul></li><li>Application logic (Router)<ul><li>Code that is only concerned about the implementation of application itself</li><li>Handles navigation and UI events</li></ul></li><li>Presentation logic (UI layer)<ul><li>Code that is concerned about the visible part of the application</li><li>Essentially displays application state</li></ul></li></ul></li></ul><h3 id=mvc>MVC<a hidden class=anchor aria-hidden=true href=#mvc>#</a></h3><ul><li>Model-View-Controller architecture</li><li><img loading=lazy src=./imgs/MVC.png alt=MVC></li><li>Event handling in MVC<ul><li>Publisher - Subscriber pattern<ul><li>Callback functions (<code>render()</code>) and <code>eventListener</code> in <code>View</code> as publisher<ul><li>Codes that know when to react</li></ul></li><li><code>Controller</code> as subscriber<ul><li>Codes that want to react</li><li>Event handler in a nutshell</li></ul></li><li>Subscribe to publisher by passing in the subscriber function</li></ul></li></ul></li><li><a href=https://www.freecodecamp.org/news/an-introduction-to-software-architecture-patterns/>Look at this article for future read</a></li></ul></div><footer class=post-footer><ul class=post-tags><li><a href=https://hadjshell.github.io/tags/%E5%88%80%E6%B3%95how-to-play-with-sword%EF%B8%8F/>ÂàÄÊ≥ï(How to play with swordüó°Ô∏è)</a></li><li><a href=https://hadjshell.github.io/tags/javascript/>JavaScript</a></li></ul><nav class=paginav><a class=prev href=https://hadjshell.github.io/posts/the-pragmatic-programmer/><span class=title>¬´ Prev</span><br><span>Time To Read A Book: The Pragmatic Programmer</span>
</a><a class=next href=https://hadjshell.github.io/posts/solid-notes/><span class=title>Next ¬ª</span><br><span>SOLID Principle</span></a></nav></footer></article></main><footer class=footer><span>&copy; Hadjshell</span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>